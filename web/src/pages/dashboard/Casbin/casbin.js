!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.casbin=t():e.casbin=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=52)}([function(e,t,r){"use strict";r.r(t),r.d(t,"keyMatchFunc",(function(){return f})),r.d(t,"keyMatch2Func",(function(){return p})),r.d(t,"keyMatch3Func",(function(){return y})),r.d(t,"regexMatchFunc",(function(){return v})),r.d(t,"ipMatchFunc",(function(){return b})),r.d(t,"generateGFunction",(function(){return R})),r.d(t,"keyMatch4Func",(function(){return g})),r.d(t,"globMatch",(function(){return w})),r.d(t,"escapeAssertion",(function(){return S})),r.d(t,"removeComments",(function(){return P})),r.d(t,"arrayEquals",(function(){return _})),r.d(t,"array2DEquals",(function(){return O})),r.d(t,"arrayRemoveDuplicates",(function(){return C})),r.d(t,"arrayToString",(function(){return T})),r.d(t,"paramsToString",(function(){return j})),r.d(t,"setEquals",(function(){return L})),r.d(t,"readFile",(function(){return N})),r.d(t,"writeFile",(function(){return F})),r.d(t,"hasEval",(function(){return M})),r.d(t,"replaceEval",(function(){return H})),r.d(t,"getEvalValue",(function(){return U}));var n=r(8),o=r(50);function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return new RegExp(t).test(e)}function s(e,t){var r=t.indexOf("*");return-1===r?e===t:e.length>r?e.slice(0,r)===t.slice(0,r):e===t.slice(0,r)}function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return s(i,a)}function l(e,t){t=t.replace(/\/\*/g,"/.*");for(var r=new RegExp(/(.*):[^/]+(.*)/g);t.includes("/:");)t=t.replace(r,"$1[^/]+$2");return"*"===t&&(t="(.*)"),c(e,"^"+t+"$")}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return l(i,a)}function h(e,t){t=t.replace(/\/\*/g,"/.*");for(var r=new RegExp(/(.*){[^/]+}(.*)/g);t.includes("/{");)t=t.replace(r,"$1[^/]+$2");return c(e,"^"+t+"$")}function y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return h(i,a)}function d(e,t){t=t.replace(/\/\*/g,"/.*");for(var r=[],n=-1,o=0;o<t.length;o++){var i=t.charAt(o);"{"===i?n=o:"}"===i&&r.push(t.substring(n,o+1))}for(var u=new RegExp(/(.*){[^/]+}(.*)/g);t.includes("/{");)t=t.replace(u,"$1([^/]+)$2");var c=(u=new RegExp("^"+t+"$")).exec(e);if(!c)return!1;if(c=c.slice(1),r.length!==c.length)throw new Error("KeyMatch4: number of tokens is not equal to number of values");var s=new Map;r.forEach((function(e,t){var n=r[t],o=s.get(n);o||(o=[]),c&&o.push(c[t]),s.set(n,o)}));var f,l=a(s.values());try{for(l.s();!(f=l.n()).done;){if(f.value.length>1)for(var p=1;p<c.length;p++)if(c[p]!==c[0])return!1}}catch(e){l.e(e)}finally{l.f()}return!0}function g(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return d(i,a)}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return c(i,a)}function m(e,t){if(!n.isV4Format(e)&&!n.isV6Format(e))throw new Error("invalid argument: ip1 in ipMatch() function is not an IP address.");if(2===t.split("/").length)return n.cidrSubnet(t).contains(e);if(!n.isV4Format(t)&&!n.isV6Format(t))throw console.log(t),new Error("invalid argument: ip2 in ipMatch() function is not an IP address.");return n.isEqual(e,t)}function b(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=(n||"").toString(),a=(o||"").toString();return m(i,a)}function w(e,t){return Object(o.isMatch)(e,t)}function R(e){var t=new Map;return function(){var r,n=(r=regeneratorRuntime.mark((function r(){var n,o,i,a,u,c,s,f,l,p,h=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=h.length,o=new Array(n),i=0;i<n;i++)o[i]=h[i];if(a=o.toString(),!(u=t.get(a))){r.next=5;break}return r.abrupt("return",u);case 5:if(c=o[0],s=o[1],f=(c||"").toString(),l=(s||"").toString(),e){r.next=12;break}u=f===l,r.next=22;break;case 12:if(2!==o.length){r.next=18;break}return r.next=15,e.hasLink(f,l);case 15:u=r.sent,r.next=22;break;case 18:return p=o[2].toString(),r.next=21,e.hasLink(f,l,p);case 21:u=r.sent;case 22:return t.set(a,u),r.abrupt("return",u);case 24:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))});return function(){return n.apply(this,arguments)}}()}var x=r(13);function k(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e){return e=(e=e.replace(/r\./g,"r_")).replace(/p\./g,"p_")}function P(e){var t=e.indexOf("#");return t>-1?e.slice(0,t).trim():e}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.length,n=t.length;if(r!==n)return!1;for(var o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.length,n=e.length;if(r!==n)return!1;for(var o=0;o<r;o++)if(!_(e[o],t[o]))return!1;return!0}function C(e){return k(new Set(e))}function T(e){return e.join(", ")}function j(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join(", ")}function L(e,t){return _(e.sort(),t.sort())}function N(e,t){return new Promise((function(r,n){x.readFile(e,t||"utf8",(function(e,t){e&&n(e),r(t)}))}))}function F(e,t,r){return new Promise((function(n,o){x.writeFile(e,t,r||"utf8",(function(e){e&&o(e),n(!0)}))}))}var I=new RegExp(/\beval\(([^),]*)\)/g);function M(e){return I.test(e)}function H(e,t){return e.replace(I,"("+t+")")}function U(e){var t=e.match(I),r=[];if(!t)return[];var n,o=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=A(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=i.indexOf("(");r.push(i.slice(a+1,-1))}}catch(e){o.e(e)}finally{o.f()}return r}},function(e,t,r){"use strict";r.r(t);var n=r(18);r.d(t,"DefaultLogger",(function(){return n.a}));var o=r(37);for(var i in o)["default","DefaultLogger"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i);var a=r(38);r.d(t,"setLogger",(function(){return a.d})),r.d(t,"getLogger",(function(){return a.a})),r.d(t,"logPrint",(function(){return a.b})),r.d(t,"logPrintf",(function(){return a.c}))},function(e,t,r){"use strict";var n=r(23),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function u(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"[object Function]"===o.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:s,isStream:function(e){return u(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):i(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)f(arguments[n],r);return t},extend:function(e,t,r){return f(t,(function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return C})),r.d(t,"i",(function(){return d})),r.d(t,"d",(function(){return y})),r.d(t,"h",(function(){return g})),r.d(t,"c",(function(){return v})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return w}));var n=r(9),o=r(1),i=r(0),a=r(11);function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)}))}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y,d={r:"request_definition",p:"policy_definition",g:"role_definition",e:"policy_effect",m:"matchers"};!function(e){e[e.PolicyAdd=0]="PolicyAdd",e[e.PolicyRemove=1]="PolicyRemove"}(y||(y={}));var g=["r","p","e","m"],v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=new Map}var t,r,n,s,f;return t=e,(r=[{key:"loadAssertion",value:function(e,t,r){var n=d[t],o=e.getString("".concat(n,"::").concat(r));return this.addDef(t,r,o)}},{key:"getKeySuffix",value:function(e){return 1===e?"":e.toString()}},{key:"loadSection",value:function(e,t){for(var r=1;this.loadAssertion(e,t,t+this.getKeySuffix(r));)r++}},{key:"addDef",value:function(e,t,r){if(""===r)return!1;var n=new _;if(n.key=t,n.value=r,"r"===e||"p"===e){for(var o=r.split(",").map((function(e){return e.trim()})),a=0;a<o.length;a++)o[a]=t+"_"+o[a];n.tokens=o}else if("m"===e){var u=r.match(/\"(.*?)\"/g)||[];u.forEach((function(e,t){r=r.replace(e,"$<".concat(t,">"))})),r=i.escapeAssertion(r),u.forEach((function(e,t){r=r.replace("$<".concat(t,">"),e)})),n.value=r}else n.value=i.escapeAssertion(r);var c=this.model.get(e);if(c)c.set(t,n);else{var s=new Map;s.set(t,n),this.model.set(e,s)}return!0}},{key:"loadModel",value:function(e){var t=a.a.newConfig(e);this.loadModelFromConfig(t)}},{key:"loadModelFromText",value:function(e){var t=a.a.newConfigFromText(e);this.loadModelFromConfig(t)}},{key:"loadModelFromConfig",value:function(e){var t=this;for(var r in d)this.loadSection(e,r);var n=[];if(g.forEach((function(e){t.hasSection(e)||n.push(d[e])})),n.length>0)throw new Error("missing required sections: ".concat(n.join(",")))}},{key:"hasSection",value:function(e){return void 0!==this.model.get(e)}},{key:"printModel",value:function(){Object(o.logPrint)("Model:"),this.model.forEach((function(e,t){e.forEach((function(e,r){Object(o.logPrint)("".concat(t,".").concat(r,": ").concat(e.value))}))}))}},{key:"buildIncrementalRoleLinks",value:(f=p(regeneratorRuntime.mark((function e(t,r,n,o,i){var a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("g"!==n){e.next=3;break}return e.next=3,null===(a=this.model.get(n))||void 0===a||null===(u=a.get(o))||void 0===u?void 0:u.buildIncrementalRoleLinks(t,r,i);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,o){return f.apply(this,arguments)})},{key:"buildRoleLinks",value:(s=p(regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.model.get("g")){e.next=3;break}return e.abrupt("return");case 3:n=c(r.values()),e.prev=4,n.s();case 6:if((o=n.n()).done){e.next=12;break}return i=o.value,e.next=10,i.buildRoleLinks(t);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))),function(e){return s.apply(this,arguments)})},{key:"clearPolicy",value:function(){this.model.forEach((function(e,t){"p"!==t&&"g"!==t||e.forEach((function(e){e.policy=[]}))}))}},{key:"getPolicy",value:function(e,t){var r,n=[],o=null===(r=this.model.get(e))||void 0===r?void 0:r.get(t);return o&&n.push.apply(n,u(o.policy)),n}},{key:"hasPolicy",value:function(e,t,r){var n,o=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);return!!o&&o.policy.some((function(e){return i.arrayEquals(e,r)}))}},{key:"addPolicy",value:function(e,t,r){if(!this.hasPolicy(e,t,r)){var n,o=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);return!!o&&(o.policy.push(r),!0)}return!1}},{key:"addPolicies",value:function(e,t,r){var n,o=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);if(!o)return[!1,[]];var i,a=c(r);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(this.hasPolicy(e,t,u))return[!1,[]]}}catch(e){a.e(e)}finally{a.f()}return o.policy=o.policy.concat(r),[!0,r]}},{key:"removePolicy",value:function(e,t,r){if(this.hasPolicy(e,t,r)){var n,o=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);return!!o&&(o.policy=o.policy.filter((function(e){return!i.arrayEquals(r,e)})),!0)}return!1}},{key:"removePolicies",value:function(e,t,r){var n,o=[],a=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);if(!a)return[!1,[]];var u,s=c(r);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(!this.hasPolicy(e,t,f))return[!1,[]]}}catch(e){s.e(e)}finally{s.f()}var l,p=c(r);try{var h=function(){var e=l.value;a.policy=a.policy.filter((function(t){var r=i.arrayEquals(e,t);return r&&o.push(t),!r}))};for(p.s();!(l=p.n()).done;)h()}catch(e){p.e(e)}finally{p.f()}return[!0,o]}},{key:"getFilteredPolicy",value:function(e,t,r){var n,o=[],i=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);if(!i)return o;var a,u=c(i.policy);try{for(u.s();!(a=u.n()).done;){for(var s=a.value,f=!0,l=0;l<(arguments.length<=3?0:arguments.length-3);l++){var p=l+3<3||arguments.length<=l+3?void 0:arguments[l+3];if(""!==p&&s[r+l]!==p){f=!1;break}}f&&o.push(s)}}catch(e){u.e(e)}finally{u.f()}return o}},{key:"removeFilteredPolicy",value:function(e,t,r){var n,o=[],i=[],a=!1;if(0==(arguments.length<=3?0:arguments.length-3))return[!1,i];var u=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);if(!u)return[!1,[]];var s,f=c(u.policy);try{for(f.s();!(s=f.n()).done;){for(var l=s.value,p=!0,h=0;h<(arguments.length<=3?0:arguments.length-3);h++){var y=h+3<3||arguments.length<=h+3?void 0:arguments[h+3];if(""!==y&&l[r+h]!==y){p=!1;break}}p?(a=!0,i.push(l)):o.push(l)}}catch(e){f.e(e)}finally{f.f()}return 0!==i.length&&(u.policy=o),[a,i]}},{key:"getValuesForFieldInPolicy",value:function(e,t,r){var n,o=null===(n=this.model.get(e))||void 0===n?void 0:n.get(t);return o?i.arrayRemoveDuplicates(o.policy.map((function(e){return e[r]}))):[]}},{key:"getValuesForFieldInPolicyAllTypes",value:function(e,t){var r=[],n=this.model.get(e);if(!n)return r;var o,a=c(n.keys());try{for(a.s();!(o=a.n()).done;){var s=o.value;r.push.apply(r,u(this.getValuesForFieldInPolicy(e,s,t)))}}catch(e){a.e(e)}finally{a.f()}return i.arrayRemoveDuplicates(r)}},{key:"printPolicy",value:function(){Object(o.getLogger)().isEnable()&&(Object(o.logPrint)("Policy:"),this.model.forEach((function(e,t){"p"!==t&&"g"!==t||e.forEach((function(e){Object(o.logPrint)("key, : ".concat(e.value,", : , ").concat(e.policy))}))})))}}])&&h(t.prototype,r),n&&h(t,n),e}();function m(){var e=new v;if(2===arguments.length)""!==(arguments.length<=0?void 0:arguments[0])&&e.loadModel(arguments.length<=0?void 0:arguments[0]);else if(1===arguments.length)e.loadModelFromText(arguments.length<=0?void 0:arguments[0]);else if(0!==arguments.length)throw new Error("Invalid parameters for model.");return e}function b(e){var t=new v;return t.loadModel(e),t}function w(e){var t=new v;return t.loadModelFromText(e),t}function R(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=k(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function k(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){E(i,n,o,a,u,"next",e)}function u(e){E(i,n,o,a,u,"throw",e)}a(void 0)}))}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key="",this.value="",this.tokens=[],this.policy=[],this.rm=new n.DefaultRoleManager(10)}var t,r,i,a,u;return t=e,(r=[{key:"buildIncrementalRoleLinks",value:(u=S(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.rm=t,!((a=(this.value.match(/_/g)||[]).length)<2)){e.next=4;break}throw new Error('the number of "_" in role definition should be at least 2');case 4:u=x(n),e.prev=5,u.s();case 7:if((c=u.n()).done){e.next=24;break}if(!((s=c.value).length<a)){e.next=11;break}throw new Error("grouping policy elements do not meet role definition");case 11:s.length>a&&(s=s.slice(0,a)),e.t0=r,e.next=e.t0===y.PolicyAdd?15:e.t0===y.PolicyRemove?18:21;break;case 15:return e.next=17,(o=this.rm).addLink.apply(o,[s[0],s[1]].concat(R(s.slice(2))));case 17:return e.abrupt("break",22);case 18:return e.next=20,(i=this.rm).deleteLink.apply(i,[s[0],s[1]].concat(R(s.slice(2))));case 20:return e.abrupt("break",22);case 21:throw new Error("unsupported operation");case 22:e.next=7;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(5),u.e(e.t1);case 29:return e.prev=29,u.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[5,26,29,32]])}))),function(e,t,r){return u.apply(this,arguments)})},{key:"buildRoleLinks",value:(a=S(regeneratorRuntime.mark((function e(t){var r,n,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.rm=t,!((r=(this.value.match(/_/g)||[]).length)<2)){e.next=4;break}throw new Error('the number of "_" in role definition should be at least 2');case 4:n=x(this.policy),e.prev=5,n.s();case 7:if((i=n.n()).done){e.next=14;break}return(u=i.value).length>r&&(u=u.slice(0,r)),e.next=12,(a=this.rm).addLink.apply(a,[u[0],u[1]].concat(R(u.slice(2))));case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return Object(o.logPrint)("Role links for: ".concat(this.key)),e.next=25,this.rm.printRoles();case 25:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(e){return a.apply(this,arguments)})}])&&P(t.prototype,r),i&&P(t,i),e}();function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.functions=new Map}var t,r,n;return t=e,n=[{key:"loadFunctionMap",value:function(){var t=new e;return t.addFunction("keyMatch",i.keyMatchFunc),t.addFunction("keyMatch2",i.keyMatch2Func),t.addFunction("keyMatch3",i.keyMatch3Func),t.addFunction("keyMatch4",i.keyMatch4Func),t.addFunction("regexMatch",i.regexMatchFunc),t.addFunction("ipMatch",i.ipMatchFunc),t.addFunction("globMatch",i.globMatch),t}}],(r=[{key:"addFunction",value:function(e,t){this.functions.get(e)||this.functions.set(e,t)}},{key:"getFunctions",value:function(){return this.functions}}])&&O(t.prototype,r),n&&O(t,n),e}()},function(e,t,r){"use strict";r.r(t);var n=r(5);r.d(t,"Effect",(function(){return n.a}));var o=r(34);for(var i in o)["default","Effect"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i);var a=r(35);r.d(t,"DefaultEffector",(function(){return a.a}));var u=r(17);r.d(t,"DefaultEffectorStream",(function(){return u.a}))},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Allow=1]="Allow",e[e.Indeterminate=2]="Indeterminate",e[e.Deny=3]="Deny"}(n||(n={}))},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"loadPolicyLine",value:function(e,t){if(e&&""!==e.trim()&&"#"!==e.charAt(0)){var r=e.split(",").map((function(e){return e.trim()})),n=r[0],o=n.substring(0,1),i=t.model.get(o);if(i){var a=i.get(n);a&&a.policy.push(r.slice(1))}}}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return oe})),r.d(t,"c",(function(){return ie})),r.d(t,"b",(function(){return ue}));var n=r(22),o=r(4),i=r(3),a=r(9),u=r(0),c=r(1);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){v(i,n,o,a,u,"next",e)}function u(e){v(i,n,o,a,u,"throw",e)}a(void 0)}))}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=A(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function A(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){S(i,n,o,a,u,"next",e)}function u(e){S(i,n,o,a,u,"throw",e)}a(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){F(i,n,o,a,u,"next",e)}function u(e){F(i,n,o,a,u,"throw",e)}a(void 0)}))}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(Q,e);var t,r,n,o,i,a,u,c,s,f,l,p,h,y,d,g,v,m,b,w,R,x,k,A,E,S,P,_,O,C,T,j,L,N,F,B,$,G,q,Y,K,W,z,V,X=D(Q);function Q(){return M(this,Q),X.apply(this,arguments)}return t=Q,(r=[{key:"getAllSubjects",value:(V=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedSubjects("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return V.apply(this,arguments)})},{key:"getAllNamedSubjects",value:(z=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getValuesForFieldInPolicy("p",t,0));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return z.apply(this,arguments)})},{key:"getAllObjects",value:(W=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedObjects("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"getAllNamedObjects",value:(K=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getValuesForFieldInPolicy("p",t,1));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"getAllActions",value:(Y=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedActions("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"getAllNamedActions",value:(q=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getValuesForFieldInPolicy("p",t,2));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return q.apply(this,arguments)})},{key:"getAllRoles",value:(G=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedRoles("g"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"getAllNamedRoles",value:($=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getValuesForFieldInPolicy("g",t,1));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return $.apply(this,arguments)})},{key:"getPolicy",value:(B=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getNamedPolicy("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"getFilteredPolicy",value:(F=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.getFilteredNamedPolicy.apply(this,["p",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"getNamedPolicy",value:(N=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getPolicy("p",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getFilteredNamedPolicy",value:(L=I(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=u.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=u[a];return e.abrupt("return",(n=this.model).getFilteredPolicy.apply(n,["p",t,r].concat(i)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return L.apply(this,arguments)})},{key:"getGroupingPolicy",value:(j=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getNamedGroupingPolicy("g"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"getFilteredGroupingPolicy",value:(T=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.getFilteredNamedGroupingPolicy.apply(this,["g",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"getNamedGroupingPolicy",value:(C=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.getPolicy("g",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"getFilteredNamedGroupingPolicy",value:(O=I(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=u.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=u[a];return e.abrupt("return",(n=this.model).getFilteredPolicy.apply(n,["g",t,r].concat(i)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)})},{key:"hasPolicy",value:(_=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.hasNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"hasNamedPolicy",value:(P=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.model.hasPolicy("p",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"addPolicy",value:(S=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.addNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"addPolicies",value:(E=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addNamedPolicies("p",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"addNamedPolicy",value:(A=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.addPolicyInternal("p",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"addNamedPolicies",value:(k=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addPoliciesInternal("p",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"removePolicy",value:(x=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.removeNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"removePolicies",value:(R=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeNamedPolicies("p",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"removeFilteredPolicy",value:(w=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removeFilteredNamedPolicy.apply(this,["p",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"removeNamedPolicy",value:(b=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removePolicyInternal("p",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"removeNamedPolicies",value:(m=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removePoliciesInternal("p",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"removeFilteredNamedPolicy",value:(v=I(regeneratorRuntime.mark((function e(t,r){var n,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=a[i];return e.abrupt("return",this.removeFilteredPolicyInternal("p",t,r,o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"hasGroupingPolicy",value:(g=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.hasNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"hasNamedGroupingPolicy",value:(d=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.model.hasPolicy("g",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"addGroupingPolicy",value:(y=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.addNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"addGroupingPolicies",value:(h=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addNamedGroupingPolicies("g",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"addNamedGroupingPolicy",value:(p=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.addPolicyInternal("g",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"addNamedGroupingPolicies",value:(l=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addPoliciesInternal("g",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"removeGroupingPolicy",value:(f=I(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.removeNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"removeGroupingPolicies",value:(s=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeNamedGroupingPolicies("g",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"removeFilteredGroupingPolicy",value:(c=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removeFilteredNamedGroupingPolicy.apply(this,["g",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"removeNamedGroupingPolicy",value:(u=I(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removePolicyInternal("g",t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"removeNamedGroupingPolicies",value:(a=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removePoliciesInternal("g",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeFilteredNamedGroupingPolicy",value:(i=I(regeneratorRuntime.mark((function e(t,r){var n,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=a[i];return e.abrupt("return",this.removeFilteredPolicyInternal("g",t,r,o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"addFunction",value:(o=I(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fm.addFunction(t,r);case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})}])&&H(t.prototype,r),n&&H(t,n),Q}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(l,e);var t,r,n,o,a,u,c,s,f=T(l);function l(){return _(this,l),f.apply(this,arguments)}return t=l,(r=[{key:"addPolicyInternal",value:(s=P(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.model.hasPolicy(t,r,n)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.adapter||!this.autoSave){e.next=12;break}return e.prev=3,e.next=6,this.adapter.addPolicy(t,r,n);case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"not implemented"===e.t0.message){e.next=12;break}throw e.t0;case 12:if(this.watcher&&this.autoNotifyWatcher&&this.watcher.update(),o=this.model.addPolicy(t,r,n),"g"!==t||!o){e.next=17;break}return e.next=17,this.buildIncrementalRoleLinks(i.d.PolicyAdd,r,[n]);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t,r){return s.apply(this,arguments)})},{key:"addPoliciesInternal",value:(c=P(regeneratorRuntime.mark((function e(t,r,n){var o,a,u,c,s,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=k(n),e.prev=1,o.s();case 3:if((a=o.n()).done){e.next=9;break}if(u=a.value,!this.model.hasPolicy(t,r,u)){e.next=7;break}return e.abrupt("return",!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),o.e(e.t0);case 14:return e.prev=14,o.f(),e.finish(14);case 17:if(!this.autoSave){e.next=31;break}if(!("addPolicies"in this.adapter)){e.next=30;break}return e.prev=19,e.next=22,this.adapter.addPolicies(t,r,n);case 22:e.next=28;break;case 24:if(e.prev=24,e.t1=e.catch(19),"not implemented"===e.t1.message){e.next=28;break}throw e.t1;case 28:e.next=31;break;case 30:throw new Error("cannot to save policy, the adapter does not implement the BatchAdapter");case 31:return this.watcher&&this.autoNotifyWatcher&&this.watcher.update(),e.next=34,this.model.addPolicies(t,r,n);case 34:if(c=e.sent,s=x(c,2),f=s[0],l=s[1],"g"!==t||!f||null==l||!l.length){e.next=41;break}return e.next=41,this.buildIncrementalRoleLinks(i.d.PolicyAdd,r,l);case 41:return e.abrupt("return",f);case 42:case"end":return e.stop()}}),e,this,[[1,11,14,17],[19,24]])}))),function(e,t,r){return c.apply(this,arguments)})},{key:"removePolicyInternal",value:(u=P(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.hasPolicy(t,r,n)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.adapter||!this.autoSave){e.next=12;break}return e.prev=3,e.next=6,this.adapter.removePolicy(t,r,n);case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"not implemented"===e.t0.message){e.next=12;break}throw e.t0;case 12:return this.watcher&&this.autoNotifyWatcher&&this.watcher.update(),e.next=15,this.model.removePolicy(t,r,n);case 15:if(o=e.sent,"g"!==t||!o){e.next=19;break}return e.next=19,this.buildIncrementalRoleLinks(i.d.PolicyRemove,r,[n]);case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t,r){return u.apply(this,arguments)})},{key:"removePoliciesInternal",value:(a=P(regeneratorRuntime.mark((function e(t,r,n){var o,a,u,c,s,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=k(n),e.prev=1,o.s();case 3:if((a=o.n()).done){e.next=9;break}if(u=a.value,this.model.hasPolicy(t,r,u)){e.next=7;break}return e.abrupt("return",!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),o.e(e.t0);case 14:return e.prev=14,o.f(),e.finish(14);case 17:if(!this.autoSave){e.next=31;break}if(!("removePolicies"in this.adapter)){e.next=30;break}return e.prev=19,e.next=22,this.adapter.removePolicies(t,r,n);case 22:e.next=28;break;case 24:if(e.prev=24,e.t1=e.catch(19),"not implemented"===e.t1.message){e.next=28;break}throw e.t1;case 28:e.next=31;break;case 30:throw new Error("cannot to save policy, the adapter does not implement the BatchAdapter");case 31:if(this.watcher&&this.autoNotifyWatcher&&this.watcher.update(),c=this.model.removePolicies(t,r,n),s=x(c,2),f=s[0],l=s[1],"g"!==t||!f||null==l||!l.length){e.next=36;break}return e.next=36,this.buildIncrementalRoleLinks(i.d.PolicyRemove,r,l);case 36:return e.abrupt("return",f);case 37:case"end":return e.stop()}}),e,this,[[1,11,14,17],[19,24]])}))),function(e,t,r){return a.apply(this,arguments)})},{key:"removeFilteredPolicyInternal",value:(o=P(regeneratorRuntime.mark((function e(t,r,n,o){var a,u,c,s,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.adapter||!this.autoSave){e.next=10;break}return e.prev=1,e.next=4,(u=this.adapter).removeFilteredPolicy.apply(u,[t,r,n].concat(R(o)));case 4:e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(1),"not implemented"===e.t0.message){e.next=10;break}throw e.t0;case 10:if(this.watcher&&this.autoNotifyWatcher&&this.watcher.update(),c=(a=this.model).removeFilteredPolicy.apply(a,[t,r,n].concat(R(o))),s=x(c,2),f=s[0],l=s[1],"g"!==t||!f||null==l||!l.length){e.next=15;break}return e.next=15,this.buildIncrementalRoleLinks(i.d.PolicyRemove,r,l);case 15:return e.abrupt("return",f);case 16:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e,t,r,n){return o.apply(this,arguments)})}])&&O(t.prototype,r),n&&O(t,n),l}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fm=i.b.loadFunctionMap(),this.eft=new o.DefaultEffector,this.matcherMap=new Map,this.watcher=null,this.rm=new a.DefaultRoleManager(10),this.enabled=!0,this.autoSave=!0,this.autoBuildRoleLinks=!0,this.autoNotifyWatcher=!0}var t,r,l,h,d,g,v,w,R,x,k,A;return t=e,(r=[{key:"getExpression",value:function(e,t){var r="".concat(e?"ASYNC[":"SYNC[").concat(t,"]"),o=this.matcherMap.get(r);return o||(o=e?Object(n.compileAsync)(t):Object(n.compile)(t),this.matcherMap.set(r,o)),o}},{key:"loadModel",value:function(){this.model=Object(i.e)(),this.model.loadModel(this.modelPath),this.model.printModel()}},{key:"getModel",value:function(){return this.model}},{key:"setModel",value:function(e){this.model=e}},{key:"getAdapter",value:function(){return this.adapter}},{key:"setAdapter",value:function(e){this.adapter=e}},{key:"setWatcher",value:function(e){var t=this;this.watcher=e,e.setUpdateCallback(m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadPolicy();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))}},{key:"setRoleManager",value:function(e){this.rm=e}},{key:"getRoleManager",value:function(){return this.rm}},{key:"setEffector",value:function(e){this.eft=e}},{key:"clearPolicy",value:function(){this.model.clearPolicy()}},{key:"loadPolicy",value:(A=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.model.clearPolicy(),e.next=3,this.adapter.loadPolicy(this.model);case 3:if(!this.autoBuildRoleLinks){e.next=6;break}return e.next=6,this.buildRoleLinksInternal();case 6:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"loadFilteredPolicy",value:(k=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.clearPolicy(),!("isFiltered"in this.adapter)){e.next=6;break}return e.next=4,this.adapter.loadFilteredPolicy(this.model,t);case 4:e.next=7;break;case 6:throw new Error("filtered policies are not supported by this adapter");case 7:if(!this.autoBuildRoleLinks){e.next=10;break}return e.next=10,this.buildRoleLinksInternal();case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"isFiltered",value:function(){return"isFiltered"in this.adapter&&this.adapter.isFiltered()}},{key:"savePolicy",value:(x=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFiltered()){e.next=2;break}throw new Error("Cannot save a filtered policy");case 2:return e.next=4,this.adapter.savePolicy(this.model);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:if(!this.watcher){e.next=11;break}return e.next=10,this.watcher.update();case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"enableEnforce",value:function(e){this.enabled=e}},{key:"enableLog",value:function(e){Object(c.getLogger)().enableLog(e)}},{key:"enableAutoSave",value:function(e){this.autoSave=e}},{key:"enableAutoNotifyWatcher",value:function(e){this.autoNotifyWatcher=e}},{key:"enableAutoBuildRoleLinks",value:function(e){this.autoBuildRoleLinks=e}},{key:"buildRoleLinks",value:(R=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildRoleLinksInternal());case 1:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)})},{key:"buildIncrementalRoleLinks",value:(w=m(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.buildIncrementalRoleLinks(this.rm,t,"g",r,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return w.apply(this,arguments)})},{key:"buildRoleLinksInternal",value:(v=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rm.clear();case 2:return e.next=4,this.model.buildRoleLinks(this.rm);case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"privateEnforce",value:(g=m(regeneratorRuntime.mark((function e(){var t,r,n,i,a,l,h,d,g,v,m,b,w,R,x,k,A,E,S,P,_,O,C,T,j,L,N,F,I,M,H,U=this,D=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(g=!(D.length>0&&void 0!==D[0])||D[0],v=D.length,m=new Array(v>1?v-1:0),b=1;b<v;b++)m[b-1]=D[b];if(this.enabled){e.next=4;break}return e.abrupt("return",!0);case 4:if(w={},this.fm.getFunctions().forEach((function(e,t){w[t]=e})),null==(R=this.model.model.get("g"))||R.forEach((function(e,t){var r=e.rm;w[t]=Object(u.generateGFunction)(r)})),x=null===(t=this.model.model.get("m"))||void 0===t||null===(r=t.get("m"))||void 0===r?void 0:r.value){e.next=11;break}throw new Error("Unable to find matchers in model");case 11:if(k=null===(n=this.model.model.get("e"))||void 0===n||null===(i=n.get("e"))||void 0===i?void 0:i.value){e.next=14;break}throw new Error("Unable to find policy_effect in model");case 14:if(A=Object(u.hasEval)(x),E=void 0,S=null===(a=this.model.model.get("p"))||void 0===a?void 0:a.get("p"),P=null==S||null===(l=S.policy)||void 0===l?void 0:l.length,_=null===(h=this.model.model.get("r"))||void 0===h||null===(d=h.get("r"))||void 0===d?void 0:d.tokens,O=null==_?void 0:_.length,C=this.eft.newStream(k),!P||0===P){e.next=34;break}T=regeneratorRuntime.mark((function e(t){var r,n,i,a,c,l,h,d,v,b,R,k,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},(null==_?void 0:_.length)===m.length){e.next=3;break}throw new Error("invalid request size: expected ".concat(O,", got ").concat(m.length,", rvals: ").concat(m,'"'));case 3:if(_.forEach((function(e,t){r[e]=m[t]})),null==S||S.tokens.forEach((function(e,n){r[e]=null==S?void 0:S.policy[t][n]})),!A){e.next=32;break}n=Object(u.getEvalValue)(x),i=x,a=y(n),e.prev=9,a.s();case 11:if((c=a.n()).done){e.next=21;break}if(!((l=c.value)in r)){e.next=18;break}h=Object(u.escapeAssertion)(r[l]),i=Object(u.replaceEval)(i,h),e.next=19;break;case 18:throw new Error("".concat(l," not in ").concat(r));case 19:e.next=11;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(9),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:E=U.getExpression(g,i),e.next=33;break;case 32:void 0===E&&(E=U.getExpression(g,x));case 33:if(d=p(p({},r),w),!g){e.next=40;break}return e.next=37,E(d);case 37:e.t1=e.sent,e.next=41;break;case 40:e.t1=E(d);case 41:v=e.t1,b=void 0,e.t2=f(v),e.next="boolean"===e.t2?46:"number"===e.t2?48:50;break;case 46:return b=v?o.Effect.Allow:o.Effect.Indeterminate,e.abrupt("break",51);case 48:return b=0===v?o.Effect.Indeterminate:v,e.abrupt("break",51);case 50:throw new Error("matcher result should be boolean or number");case 51:if((R=r.p_eft)&&b===o.Effect.Allow&&(b="allow"===R?o.Effect.Allow:"deny"===R?o.Effect.Deny:o.Effect.Indeterminate),k=C.pushEffect(b),(P=s(k,2))[0],!P[1]){e.next=56;break}return e.abrupt("return","break");case 56:case"end":return e.stop()}}),e,null,[[9,23,26,29]])})),j=0;case 24:if(!(j<P)){e.next=32;break}return e.delegateYield(T(j),"t0",26);case 26:if("break"!==e.t0){e.next=29;break}return e.abrupt("break",32);case 29:j++,e.next=24;break;case 32:e.next=48;break;case 34:if(N={},null==_||_.forEach((function(e,t){N[e]=m[t]})),null==S||null===(L=S.tokens)||void 0===L||L.forEach((function(e){N[e]=""})),E=this.getExpression(g,x),F=p(p({},N),w),!g){e.next=45;break}return e.next=42,E(F);case 42:e.t1=e.sent,e.next=46;break;case 45:e.t1=E(F);case 46:e.t1?C.pushEffect(o.Effect.Allow):C.pushEffect(o.Effect.Indeterminate);case 48:if(I=C.current(),Object(c.getLogger)().isEnable()){for(M="Request: ",H=0;H<m.length;H++)H!==m.length-1?M+="".concat(m[H],", "):M+=m[H];M+=" ---\x3e ".concat(I),Object(c.logPrint)(M)}return e.abrupt("return",I);case 51:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"enforceWithSyncCompile",value:(d=m(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.privateEnforce.apply(this,[!1].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"enforce",value:(h=m(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.privateEnforce.apply(this,[!0].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})}])&&b(t.prototype,r),l&&b(t,l),e}())),q=r(12);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=z(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function z(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){X(i,n,o,a,u,"next",e)}function u(e){X(i,n,o,a,u,"throw",e)}a(void 0)}))}}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ne(e);if(t){var o=ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(_,e);var t,r,n,o,a,c,s,f,l,p,h,y,d,g,v,m,b,w,R,x,k,A,E,S,P=te(_);function _(){return J(this,_),P.apply(this,arguments)}return t=_,(r=[{key:"initWithFile",value:(S=Q(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new q.FileAdapter(r),e.next=3,this.initWithAdapter(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:"initWithString",value:(E=Q(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new q.StringAdapter(r),e.next=3,this.initWithAdapter(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"initWithAdapter",value:(A=Q(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.e)(t,""),e.next=3,this.initWithModelAndAdapter(n,r);case 3:this.modelPath=t;case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return A.apply(this,arguments)})},{key:"initWithModelAndAdapter",value:(k=Q(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&(this.adapter=r),this.model=t,this.model.printModel(),!this.adapter){e.next=6;break}return e.next=6,this.loadPolicy();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"getRolesForUser",value:(x=Q(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=4;break}return e.abrupt("return",this.rm.getRoles(t));case 4:return e.abrupt("return",this.rm.getRoles(t,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"getUsersForRole",value:(R=Q(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=4;break}return e.abrupt("return",this.rm.getUsers(t));case 4:return e.abrupt("return",this.rm.getUsers(t,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return R.apply(this,arguments)})},{key:"hasRoleForUser",value:(w=Q(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRolesForUser(t,n);case 2:o=e.sent,i=!1,a=W(o),e.prev=5,a.s();case 7:if((u=a.n()).done){e.next=14;break}if(u.value!==r){e.next=12;break}return i=!0,e.abrupt("break",14);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:return e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(e,t,r){return w.apply(this,arguments)})},{key:"addRoleForUser",value:(b=Q(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",this.addGroupingPolicy(t,r));case 4:return e.abrupt("return",this.addGroupingPolicy(t,r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return b.apply(this,arguments)})},{key:"deleteRoleForUser",value:(m=Q(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",this.removeGroupingPolicy(t,r));case 4:return e.abrupt("return",this.removeGroupingPolicy(t,r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return m.apply(this,arguments)})},{key:"deleteRolesForUser",value:(v=Q(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=4;break}return e.abrupt("return",this.removeFilteredGroupingPolicy(0,t));case 4:return e.abrupt("return",this.removeFilteredGroupingPolicy(0,t,"",r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"deleteUser",value:(g=Q(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.removeFilteredGroupingPolicy(0,t);case 2:return r=e.sent,e.next=5,this.removeFilteredPolicy(0,t);case 5:return n=e.sent,e.abrupt("return",r||n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"deleteRole",value:(d=Q(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.removeFilteredGroupingPolicy(1,t);case 2:return r=e.sent,e.next=5,this.removeFilteredPolicy(0,t);case 5:return n=e.sent,e.abrupt("return",r||n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"deletePermission",value:(y=Q(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.removeFilteredPolicy.apply(this,[1].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"addPermissionForUser",value:(h=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return n.unshift(t),e.abrupt("return",this.addPolicy.apply(this,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deletePermissionForUser",value:(p=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return n.unshift(t),e.abrupt("return",this.removePolicy.apply(this,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deletePermissionsForUser",value:(l=Q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeFilteredPolicy(0,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getPermissionsForUser",value:(f=Q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFilteredPolicy(0,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"hasPermissionForUser",value:(s=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return n.unshift(t),e.abrupt("return",this.hasPolicy.apply(this,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getImplicitRolesForUser",value:(c=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,u,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Set,n=[t],i=s.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=s[u];case 3:if(void 0===(o=n.shift())){e.next=10;break}return e.next=6,(c=this.getRoleManager()).getRoles.apply(c,[o].concat(a));case 6:e.sent.forEach((function(e){r.has(e)||(r.add(e),n.push(e))})),e.next=3;break;case 10:return e.abrupt("return",Array.from(r));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getImplicitPermissionsForUser",value:(a=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,u,c,s,f,l,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=h.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=h[o];return e.next=3,this.getImplicitRolesForUser.apply(this,[t].concat(n));case 3:(i=e.sent).unshift(t),a=[],u=n&&0!==n.length,c=W(i),e.prev=8,c.s();case 10:if((s=c.n()).done){e.next=25;break}if(f=s.value,!u){e.next=19;break}return e.next=15,this.getFilteredPolicy.apply(this,[0,f].concat(n));case 15:l=e.sent,a.push.apply(a,K(l)),e.next=23;break;case 19:return e.next=21,this.getPermissionsForUser(f);case 21:p=e.sent,a.push.apply(a,K(p));case 23:e.next=10;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(8),c.e(e.t0);case 30:return e.prev=30,c.f(),e.finish(30);case 33:return e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[8,27,30,33]])}))),function(e){return a.apply(this,arguments)})},{key:"getImplicitUsersForPermission",value:(o=Q(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,c,s,f,l,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.getAllSubjects();case 3:for(r=e.sent,n=Object(u.arrayRemoveDuplicates)([].concat(K(r),K(this.model.getValuesForFieldInPolicyAllTypes("g",0)))),o=this.model.getValuesForFieldInPolicyAllTypes("g",1),i=p.length,a=new Array(i),c=0;c<i;c++)a[c]=p[c];s=W(n),e.prev=8,s.s();case 10:if((f=s.n()).done){e.next=18;break}return l=f.value,e.next=14,this.enforce.apply(this,[l].concat(a));case 14:e.sent&&t.push(l);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",t.filter((function(e){return!o.some((function(t){return e===t}))})));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(){return o.apply(this,arguments)})}])&&Z(t.prototype,r),n&&Z(t,n),_}(G);function ie(e){return ae.apply(this,arguments)}function ae(){return(ae=Q(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new t,n=0,o=s.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=s[a];if(i.length>=1&&"boolean"==typeof(u=i[i.length-1])&&(Object(c.getLogger)().enableLog(u),n++),i.length-n!=2){e.next=23;break}if("string"!=typeof i[0]){e.next=15;break}if("string"!=typeof i[1]){e.next=11;break}return e.next=9,r.initWithFile(i[0].toString(),i[1].toString());case 9:e.next=13;break;case 11:return e.next=13,r.initWithAdapter(i[0].toString(),i[1]);case 13:e.next=21;break;case 15:if("string"!=typeof i[1]){e.next=19;break}throw new Error("Invalid parameters for enforcer.");case 19:return e.next=21,r.initWithModelAndAdapter(i[0],i[1]);case 21:e.next=39;break;case 23:if(i.length-n!=1){e.next=33;break}if("string"!=typeof i[0]){e.next=29;break}return e.next=27,r.initWithFile(i[0],"");case 27:e.next=31;break;case 29:return e.next=31,r.initWithModelAndAdapter(i[0]);case 31:e.next=39;break;case 33:if(i.length!==n){e.next=38;break}return e.next=36,r.initWithFile("","");case 36:e.next=39;break;case 38:throw new Error("Invalid parameters for enforcer.");case 39:return e.abrupt("return",r);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return ce.apply(this,arguments)}function ce(){return(ce=Q(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",ie.apply(void 0,[oe].concat(r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";var n=t,o=r(31).Buffer,i=r(77);n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new o(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var i,a=e.split(":",8);for(i=0;i<a.length;i++){var u;this.isV4Format(a[i])&&(u=this.toBuffer(a[i]),a[i]=u.slice(0,2).toString("hex")),u&&++i<8&&a.splice(i,0,u.slice(2,4).toString("hex"))}if(""===a[0])for(;a.length<8;)a.unshift("0");else if(""===a[a.length-1])for(;a.length<8;)a.push("0");else if(a.length<8){for(i=0;i<a.length&&""!==a[i];i++);var c=[i,1];for(i=9-a.length;i>0;i--)c.push("0");a.splice.apply(a,c)}for(n=t||new o(r+16),i=0;i<a.length;i++){var s=parseInt(a[i],16);n[r++]=s>>8&255,n[r++]=255&s}}if(!n)throw Error("Invalid ip address: "+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var o=0;o<r;o++)n.push(e[t+o]);n=n.join(".")}else if(16===r){for(o=0;o<r;o+=2)n.push(e.readUInt16BE(t+o).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var a=/^(\d{1,3}\.){3,3}\d{1,3}$/,u=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}n.isV4Format=function(e){return a.test(e)},n.isV6Format=function(e){return u.test(e)},n.fromPrefixLen=function(e,t){var r=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(r=16);for(var i=new o(r),a=0,u=i.length;a<u;++a){var s=8;e<8&&(s=e),e-=s,i[a]=255&~(255>>s)}return n.toString(i)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new o(Math.max(e.length,t.length)),i=0;if(e.length===t.length)for(i=0;i<e.length;i++)r[i]=e[i]&t[i];else if(4===t.length)for(i=0;i<t.length;i++)r[i]=e[e.length-4+i]&t[i];else{for(i=0;i<r.length-6;i++)r[i]=0;for(r[10]=255,r[11]=255,i=0;i<e.length;i++)r[i+12]=e[i]&t[i+12];i+=12}for(;i<r.length;i++)r[i]=0;return n.toString(r)},n.cidr=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var o=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,o)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),o=n.toBuffer(t),i=0,a=0;a<o.length;a++)if(255===o[a])i+=8;else for(var u=255&o[a];u;)u=u<<1&255,i++;var c=Math.pow(2,32-i);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:i,numHosts:c<=2?c:c-2,length:c,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var o=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,o)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var o=e,i=t;t.length>e.length&&(o=t,i=e);var a=o.length-i.length;for(r=a;r<o.length;++r)o[r]|=i[r-a];return n.toString(o)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var o=t;t=e,e=o}for(r=0;r<10;r++)if(0!==t[r])return!1;var i=t.readUInt16BE(10);if(0!==i&&65535!==i)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},n.address=function(e,t){var r,o=i.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var a=o[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===a.length)return;return a[0].address}return(r=Object.keys(o).map((function(r){var i=o[r].filter((function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||("public"===e?n.isPrivate(r.address):n.isPublic(r.address)))}));return i.length?i[0].address:void 0})).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},n.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},function(e,t,r){"use strict";r.r(t);var n=r(36);r.d(t,"DefaultRoleManager",(function(){return n.a}));var o=r(39);for(var i in o)["default","DefaultRoleManager"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i)},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(6),o=r(0);function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.filePath=t}var t,r,i,c,s,f,l,p,h,y;return t=e,(r=[{key:"loadPolicy",value:(y=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filePath){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadPolicyFile(t,n.a.loadPolicyLine);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"loadPolicyFile",value:(h=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.readFile)(this.filePath);case 2:e.sent.toString().split("\n").forEach((function(e,n){e.trim()&&r(e,t)}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"savePolicy",value:(p=a(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filePath){e.next=2;break}return e.abrupt("return",!1);case 2:if(r="",n=t.model.get("p")){e.next=6;break}return e.abrupt("return",!1);case 6:if(n.forEach((function(e){e.policy.forEach((function(t){r+=e.key+", ",r+=Object(o.arrayToString)(t),r+="\n"}))})),i=t.model.get("g")){e.next=10;break}return e.abrupt("return",!1);case 10:return i.forEach((function(e){e.policy.forEach((function(t){r+=e.key+", ",r+=Object(o.arrayToString)(t),r+="\n"}))})),e.next=13,this.savePolicyFile(r.trim());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"savePolicyFile",value:(l=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.writeFile)(this.filePath,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"addPolicy",value:(f=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return f.apply(this,arguments)})},{key:"removePolicy",value:(s=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"removeFilteredPolicy",value:(c=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return c.apply(this,arguments)})}])&&u(t.prototype,r),i&&u(t,i),e}()},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n=r(13);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=new Map}var r,i,a;return r=t,a=[{key:"newConfig",value:function(e){var r=new t;return r.parse(e),r}},{key:"newConfigFromText",value:function(r){var n=new t;return n.parseBuffer(e.from(r)),n}}],(i=[{key:"addConfig",value:function(e,r,n){""===e&&(e=t.DEFAULT_SECTION),this.data.has(e)||this.data.set(e,new Map);var o=this.data.get(e);return!!o&&(o.set(r,n),o.has(r))}},{key:"parse",value:function(e){var t=Object(n.readFileSync)(e);this.parseBuffer(t)}},{key:"parseBuffer",value:function(e){var r=this,n=e.toString().split("\n"),o=n.length,i="",a="";n.forEach((function(e,n){var u=e.indexOf(t.DEFAULT_COMMENT);u>-1&&(e=e.slice(0,u)),(u=e.indexOf(t.DEFAULT_COMMENT_SEM))>-1&&(e=e.slice(0,u));var c=e.trim();if(c){var s=n+1;if(c.startsWith("[")&&c.endsWith("]"))0!==a.length&&(r.write(i,s-1,a),a=""),i=c.substring(1,c.length-1);else{var f=!1;c.includes(t.DEFAULT_MULTI_LINE_SEPARATOR)?(a+=c.substring(0,c.length-1).trim(),s+1===o&&(f=!0)):(a+=c,f=!0),f&&(r.write(i,s,a),a="")}}}))}},{key:"write",value:function(e,t,r){var n=r.indexOf("=");if(-1===n)throw new Error("parse the content error : line ".concat(t));var o=r.substring(0,n),i=r.substring(n+1);this.addConfig(e,o.trim(),i.trim())}},{key:"getBool",value:function(e){return!!this.get(e)}},{key:"getInt",value:function(e){return Number.parseInt(this.get(e),10)}},{key:"getFloat",value:function(e){return Number.parseFloat(this.get(e))}},{key:"getString",value:function(e){return this.get(e)}},{key:"getStrings",value:function(e){return this.get(e).split(",")}},{key:"set",value:function(e,t){if(!e)throw new Error("key is empty");var r,n="",o=e.toLowerCase().split("::");o.length>=2?(n=o[0],r=o[1]):r=o[0],this.addConfig(n,r,t)}},{key:"get",value:function(e){var r,n,o=e.toLowerCase().split("::");o.length>=2?(r=o[0],n=o[1]):(r=t.DEFAULT_SECTION,n=o[0]);var i=this.data.get(r),a=i&&i.get(n);return a||""}}])&&o(r.prototype,i),a&&o(r,a),t}();i.DEFAULT_SECTION="default",i.DEFAULT_COMMENT="#",i.DEFAULT_COMMENT_SEM=";",i.DEFAULT_MULTI_LINE_SEPARATOR="\\"}).call(this,r(31).Buffer)},function(e,t,r){"use strict";r.r(t);var n=r(40);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);var i=r(10);r.d(t,"FileAdapter",(function(){return i.a}));var a=r(41);r.d(t,"StringAdapter",(function(){return a.a}));var u=r(6);r.d(t,"Helper",(function(){return u.a}));var c=r(42);for(var o in c)["default","FileAdapter","StringAdapter","Helper"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return c[e]}))}(o);var s=r(43);for(var o in s)["default","FileAdapter","StringAdapter","Helper"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return s[e]}))}(o);var f=r(44);r.d(t,"Filter",(function(){return f.b})),r.d(t,"DefaultFilteredAdapter",(function(){return f.a}));var l=r(45);for(var o in l)["default","FileAdapter","StringAdapter","Helper","Filter","DefaultFilteredAdapter"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return l[e]}))}(o);var p=r(46);r.d(t,"BatchFileAdapter",(function(){return p.a}))},function(e,t){},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,s=[],f=!1,l=-1;function p(){f&&c&&(f=!1,c.length?s=c.concat(s):l=-1,s.length&&h())}function h(){if(!f){var e=u(p);f=!0;for(var t=s.length;t;){for(c=s,s=[];++l<t;)c&&c[l].run();l=-1,t=s.length}c=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new y(e,t)),1!==s.length||f||u(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){const n=r(21),o="win32"===e.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:a,REGEX_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_GLOBAL:c}=r(16);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>u.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(i,"/"),t.removeBackslashes=e=>e.replace(a,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const t=e.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===o||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const o=e.lastIndexOf(r,n);return-1===o?e:"\\"===e[o-1]?t.escapeLast(e,r,o-1):`${e.slice(0,o)}\\${e.slice(o)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}}).call(this,r(14))},function(e,t,r){"use strict";const n=r(21),o={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},i={...o,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?i:o}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(5);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.done=!1,this.res=!1,this.expr=t}var t,r,i;return t=e,(r=[{key:"current",value:function(){return this.res}},{key:"pushEffect",value:function(e){switch(this.expr){case"some(where (p_eft == allow))":e===n.a.Allow&&(this.res=!0,this.done=!0);break;case"!some(where (p_eft == deny))":this.res=!0,e===n.a.Deny&&(this.res=!1,this.done=!0);break;case"some(where (p_eft == allow)) && !some(where (p_eft == deny))":e===n.a.Allow?this.res=!0:e===n.a.Deny&&(this.res=!1,this.done=!0);break;case"priority(p_eft) || deny":e!==n.a.Indeterminate&&(this.res=e===n.a.Allow,this.done=!0);break;default:throw new Error("unsupported effect")}return[this.res,this.done]}}])&&o(t.prototype,r),i&&o(t,i),e}()},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enable=!1}var t,r,o;return t=e,(r=[{key:"enableLog",value:function(e){this.enable=e}},{key:"isEnable",value:function(){return this.enable}},{key:"print",value:function(){var e;this.enable&&(e=console).log.apply(e,arguments)}},{key:"printf",value:function(e){if(this.enable){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=console).log.apply(t,[e].concat(n))}}}])&&n(t.prototype,r),o&&n(t,o),e}()},function(e,t,r){"use strict";const n=r(20);e.exports=(e,t={})=>{let r=(e,o={})=>{let i=t.escapeInvalid&&n.isInvalidBrace(o),a=!0===e.invalid&&!0===t.escapeInvalid,u="";if(e.value)return(i||a)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)u+=r(t);return u};return r(e)}},function(e,t,r){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,o)=>!1!==o&&(!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=o),t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let o=e[n];Array.isArray(o)?r(o,t):void 0!==o&&t.push(o)}return t};return r(e),t}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return(o?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===o(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),i=n(r.split("/")),a=Math.min(o.length,i.length),u=a,c=0;c<a;c++)if(o[c]!==i[c]){u=c;break}var s=[];for(c=u;c<o.length;c++)s.push("..");return(s=s.concat(i.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(47!==u)-1===n&&(o=!1,n=a+1),46===u?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=a+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(14))},function(e,t,r){const n=r(91),o={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},i={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function a(e,t){return e.map((function(e){return f(e,t)}))}async function u(e,t){return await Promise.all(e.map(e=>l(e,t)))}function c(e,t){const r=f(e.object,t);return e.computed?[r,r[f(e.property,t)]]:[r,r[e.property.name]]}async function s(e,t){const r=await l(e.object,t);return e.computed?[r,r[await l(e.property,t)]]:[r,r[e.property.name]]}function f(e,t){switch(e.type){case"ArrayExpression":return a(e.elements,t);case"BinaryExpression":return o[e.operator](f(e.left,t),f(e.right,t));case"CallExpression":let r,n,u;if("MemberExpression"===e.callee.type?(u=c(e.callee,t),r=u[0],n=u[1]):n=f(e.callee,t),"function"!=typeof n)return;return n.apply(r,a(e.arguments,t));case"ConditionalExpression":return f(e.test,t)?f(e.consequent,t):f(e.alternate,t);case"Identifier":return t[e.name];case"Literal":return e.value;case"LogicalExpression":return"||"===e.operator?f(e.left,t)||f(e.right,t):"&&"===e.operator?f(e.left,t)&&f(e.right,t):o[e.operator](f(e.left,t),f(e.right,t));case"MemberExpression":return c(e,t)[1];case"ThisExpression":return t;case"UnaryExpression":return i[e.operator](f(e.argument,t));default:return}}async function l(e,t){switch(e.type){case"ArrayExpression":return await u(e.elements,t);case"BinaryExpression":{const[r,n]=await Promise.all([l(e.left,t),l(e.right,t)]);return o[e.operator](r,n)}case"CallExpression":let r,n,a;if("MemberExpression"===e.callee.type?(a=await s(e.callee,t),r=a[0],n=a[1]):n=await l(e.callee,t),"function"!=typeof n)return;return await n.apply(r,await u(e.arguments,t));case"ConditionalExpression":return await l(e.test,t)?await l(e.consequent,t):await l(e.alternate,t);case"Identifier":return t[e.name];case"Literal":return e.value;case"LogicalExpression":{if("||"===e.operator)return await l(e.left,t)||await l(e.right,t);if("&&"===e.operator)return await l(e.left,t)&&await l(e.right,t);const[r,n]=await Promise.all([l(e.left,t),l(e.right,t)]);return o[e.operator](r,n)}case"MemberExpression":return(await s(e,t))[1];case"ThisExpression":return t;case"UnaryExpression":return i[e.operator](await l(e.argument,t));default:return}}e.exports={parse:n,eval:f,evalAsync:l,compile:function(e){return f.bind(null,n(e))},compileAsync:function(e){return l.bind(null,n(e))}}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(2);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(2),o=r(60),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(u=r(27)),u),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(i)})),e.exports=c}).call(this,r(14))},function(e,t,r){"use strict";var n=r(2),o=r(61),i=r(63),a=r(24),u=r(64),c=r(67),s=r(68),f=r(28);e.exports=function(e){return new Promise((function(t,r){var l=e.data,p=e.headers;n.isFormData(l)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(y+":"+d)}var g=u(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};o(t,r,i),h=null}},h.onabort=function(){h&&(r(f("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){r(f("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(f(t,e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var v=(e.withCredentials||s(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;v&&(p[e.xsrfHeaderName]=v)}if("setRequestHeader"in h&&n.forEach(p,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),r(e),h=null)})),l||(l=null),h.send(l)}))}},function(e,t,r){"use strict";var n=r(62);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(e[o],t[o])}n.forEach(o,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(i,s),n.forEach(a,(function(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(void 0,t[o])})),n.forEach(u,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var f=o.concat(i).concat(a).concat(u),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===f.indexOf(e)}));return n.forEach(l,s),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(74),o=r(75),i=r(76);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r),o=(e=u(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|h(t.length);return 0===(e=u(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?u(e,0):p(e,t);if("Buffer"===t.type&&i(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(f(t),e=u(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function y(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(n)return D(e).length;t=(""+t).toLowerCase(),n=!0}}function d(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){var i,a=1,u=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,u/=2,c/=2,r/=2}function s(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var f=-1;for(i=r;i<u;i++)if(s(e,i)===s(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===c)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(r+c>u&&(r=u-c),i=r;i>=0;i--){for(var l=!0,p=0;p<c;p++)if(s(e,i+p)!==s(t,p)){l=!1;break}if(l)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function w(e,t,r,n){return $(D(t,e.length-r),e,r,n)}function R(e,t,r,n){return $(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return R(e,t,r,n)}function k(e,t,r,n){return $(B(t),e,r,n)}function A(e,t,r,n){return $(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,u,c,s=e[o],f=null,l=s>239?4:s>223?3:s>191?2:1;if(o+l<=r)switch(l){case 1:s<128&&(f=s);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&s)<<6|63&i)>127&&(f=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&s)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:i=e[o+1],a=e[o+2],u=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(c=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&c<1114112&&(f=c)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return s(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return f(t),t<=0?u(e,t):void 0!==r?"string"==typeof n?u(e,t).fill(r,n):u(e,t).fill(r):u(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):d.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(i,a),s=this.slice(n,o),f=e.slice(t,r),l=0;l<u;++l)if(s[l]!==f[l]){i=s[l],a=f[l];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=U(e[i]);return o}function C(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,i){return i||F(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return i||F(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||j(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||j(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);j(this,e,t,r,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);j(this,e,t,r,o-1,-o)}var i=r-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=c.isBuffer(e)?e:D(new c(e,n).toString()),u=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%u]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function B(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(73))},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])d(c)||!w(c)?a+=" "+c:a+=" "+u(c);return a},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,a={};function u(e,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&t._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,e,n.depth)}function c(e,t){var r=u.styles[t];return r?"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m":e}function s(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&k(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return v(o)||(o=f(e,o,n)),o}var i=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}(e,r);if(i)return i;var a=Object.keys(r),u=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),x(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(r);if(0===a.length){if(k(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(R(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return l(r)}var s,w="",A=!1,E=["{","}"];(h(r)&&(A=!0,E=["[","]"]),k(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),R(r)&&(w=" "+Date.prototype.toUTCString.call(r)),x(r)&&(w=" "+l(r)),0!==a.length||A&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),s=A?function(e,t,r,n,o){for(var i=[],a=0,u=t.length;a<u;++a)_(t,String(a))?i.push(p(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))})),i}(e,r,n,u,a):a.map((function(t){return p(e,r,n,u,t,A)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(s,w,E)):E[0]+w+E[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var a,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),_(n,o)||(a="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=d(r)?f(e,c.value,null):f(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),m(a)){if(i&&o.match(/^\d+$/))return u;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function h(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function d(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function m(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===A(e)}function w(e){return"object"==typeof e&&null!==e}function R(e){return w(e)&&"[object Date]"===A(e)}function x(e){return w(e)&&("[object Error]"===A(e)||e instanceof Error)}function k(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(m(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;a[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else a[r]=function(){};return a[r]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=y,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=b,t.isObject=w,t.isDate=R,t.isError=x,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(78);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=r(79),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(O&&e[O]){var t;if("function"!=typeof(t=e[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),O&&Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=O,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(C,t,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(14))},function(e,t,r){"use strict";
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const n=r(32),o=r(82),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),a=e=>"number"==typeof e||"string"==typeof e&&""!==e,u=e=>Number.isInteger(+e),c=e=>{let t=""+e,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},s=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},f=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},l=(e,t,r,n)=>{if(r)return o(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);return e===t?i:`[${i}-${String.fromCharCode(t)}]`},p=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return o(e,t,r)},h=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),y=(e,t,r)=>{if(!0===r.strictRanges)throw h([e,t]);return[]},d=(e,t,r=1,n={})=>{let o=Number(e),i=Number(t);if(!Number.isInteger(o)||!Number.isInteger(i)){if(!0===n.strictRanges)throw h([e,t]);return[]}0===o&&(o=0),0===i&&(i=0);let a=o>i,u=String(e),y=String(t),d=String(r);r=Math.max(Math.abs(r),1);let g=c(u)||c(y)||c(d),v=g?Math.max(u.length,y.length,d.length):0,m=!1===g&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(m);if(n.toRegex&&1===r)return l(f(e,v),f(t,v),!0,n);let w={negatives:[],positives:[]},R=[],x=0;for(;a?o>=i:o<=i;)!0===n.toRegex&&r>1?w[(k=o)<0?"negatives":"positives"].push(Math.abs(k)):R.push(s(b(o,x),v,m)),o=a?o-r:o+r,x++;var k;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let r,n=t.capture?"":"?:",o="",i="";return e.positives.length&&(o=e.positives.join("|")),e.negatives.length&&(i=`-(${n}${e.negatives.join("|")})`),r=o&&i?`${o}|${i}`:o||i,t.wrap?`(${n}${r})`:r})(w,n):p(R,null,{wrap:!1,...n}):R},g=(e,t,r,n={})=>{if(null==t&&a(e))return[e];if(!a(e)||!a(t))return y(e,t,n);if("function"==typeof r)return g(e,t,1,{transform:r});if(i(r))return g(e,t,0,r);let o={...n};return!0===o.capture&&(o.wrap=!0),r=r||o.step||1,u(r)?u(e)&&u(t)?d(e,t,r,o):((e,t,r=1,n={})=>{if(!u(e)&&e.length>1||!u(t)&&t.length>1)return y(e,t,n);let o=n.transform||(e=>String.fromCharCode(e)),i=(""+e).charCodeAt(0),a=(""+t).charCodeAt(0),c=i>a,s=Math.min(i,a),f=Math.max(i,a);if(n.toRegex&&1===r)return l(s,f,!1,n);let h=[],d=0;for(;c?i>=a:i<=a;)h.push(o(i,d)),i=c?i-r:i+r,d++;return!0===n.toRegex?p(h,null,{wrap:!1,options:n}):h})(e,t,Math.max(Math.abs(r),1),o):null==r||i(r)?g(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,o)};e.exports=g},function(e,t){},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(17);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"newStream",value:function(e){return new n.a(e)}}])&&o(t.prototype,r),i&&o(t,i),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)}))}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function f(e,t,r){return(f=l()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&p(o,r.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}var b="casbin::default";function w(e,t,r){var n=e.get(t);return void 0===n?(e.set(t,r),r):n}var R=function(){function e(t){g(this,e),this.name=t,this.roles=[]}return m(e,[{key:"addRole",value:function(e){this.roles.some((function(t){return t.name===e.name}))||this.roles.push(e)}},{key:"deleteRole",value:function(e){this.roles=this.roles.filter((function(t){return t.name!==e.name}))}},{key:"hasRole",value:function(e,t){if(this.name===e)return!0;if(t<=0)return!1;var r,n=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(this.roles);try{for(n.s();!(r=n.n()).done;){if(r.value.hasRole(e,t-1))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"hasDirectRole",value:function(e){return this.roles.some((function(t){return t.name===e}))}},{key:"toString",value:function(){return this.name+this.roles.join(", ")}},{key:"getRoles",value:function(){return this.roles.map((function(e){return e.name}))}}]),e}(),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,r,n=(t=o,r=l(),function(){var e,n=h(t);if(r){var o=h(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return c(this,e)});function o(){return g(this,o),n.call(this)}return m(o,[{key:"hasRole",value:function(e,t){var r=!1;return t?(this.forEach((function(n,o){t(e,o)&&(r=!0)})),r):this.has(e)}},{key:"createRole",value:function(e,t){var r=this,n=w(this,e,new R(e));return t&&this.forEach((function(o,i){if(t(e,i)&&e!==i){var a=w(r,i,new R(i));n.addRole(a)}})),n}}]),o}(s(Map)),k=function(){function e(t){g(this,e),this.hasPattern=!1,this.hasDomainPattern=!1,this.allDomains=new Map,this.allDomains.set(b,new x),this.maxHierarchyLevel=t}var t,r,o,a,c,s,f,l,p;return m(e,[{key:"addMatchingFunc",value:(p=u(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPattern=!0,"string"!=typeof t||!r){e.next=5;break}this.matchingFunc=r,e.next=10;break;case 5:if("function"!=typeof t){e.next=9;break}this.matchingFunc=t,e.next=10;break;case 9:throw new Error("error: domain should be 1 parameter");case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"addDomainMatchingFunc",value:(l=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.hasDomainPattern=!0,this.domainMatchingFunc=t;case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"generateTempRoles",value:function(e){var t=this;w(this.allDomains,e,new x);var r=new Set([e]);this.hasDomainPattern&&this.allDomains.forEach((function(n,o){t.domainMatchingFunc(e,o)&&r.add(o)}));var n=new x;return r.forEach((function(e){w(t.allDomains,e,new x).forEach((function(e,r){var o=n.createRole(e.name,t.matchingFunc);e.getRoles().forEach((function(e){o.addRole(n.createRole(e,t.matchingFunc))}))}))})),n}},{key:"addLink",value:(f=u(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=s[i];if(0!==o.length){e.next=5;break}o=[b],e.next=7;break;case 5:if(!(o.length>1)){e.next=7;break}throw new Error("error: domain should be 1 parameter");case 7:a=w(this.allDomains,o[0],new x),u=w(a,t,new R(t)),c=w(a,r,new R(r)),u.addRole(c);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"clear",value:(s=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.allDomains=new Map,this.allDomains.set(b,new x);case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"deleteLink",value:(c=u(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=s[i];if(0!==o.length){e.next=5;break}o=[b],e.next=7;break;case 5:if(!(o.length>1)){e.next=7;break}throw new Error("error: domain should be 1 parameter");case 7:if((a=w(this.allDomains,o[0],new x)).has(t)&&a.has(r)){e.next=10;break}return e.abrupt("return");case 10:u=w(a,t,new R(t)),c=w(a,r,new R(r)),u.deleteRole(c);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"hasLink",value:(a=u(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=c[i];if(0!==o.length){e.next=5;break}o=[b],e.next=7;break;case 5:if(!(o.length>1)){e.next=7;break}throw new Error("error: domain should be 1 parameter");case 7:if(t!==r){e.next=9;break}return e.abrupt("return",!0);case 9:if((a=this.hasPattern||this.hasDomainPattern?this.generateTempRoles(o[0]):w(this.allDomains,o[0],new x)).hasRole(t,this.matchingFunc)&&a.hasRole(r,this.matchingFunc)){e.next=12;break}return e.abrupt("return",!1);case 12:return u=a.createRole(t,this.matchingFunc),e.abrupt("return",u.hasRole(r,this.maxHierarchyLevel));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getRoles",value:(o=u(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=a[o];if(0!==n.length){e.next=5;break}n=[b],e.next=7;break;case 5:if(!(n.length>1)){e.next=7;break}throw new Error("error: domain should be 1 parameter");case 7:if((i=this.hasPattern||this.hasDomainPattern?this.generateTempRoles(n[0]):w(this.allDomains,n[0],new x)).hasRole(t,this.matchingFunc)){e.next=10;break}return e.abrupt("return",[]);case 10:return e.abrupt("return",i.createRole(t,this.matchingFunc).getRoles());case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getUsers",value:(r=u(regeneratorRuntime.mark((function e(t){var r,n,o,a,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=u.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=u[o];if(0!==n.length){e.next=5;break}n=[b],e.next=7;break;case 5:if(!(n.length>1)){e.next=7;break}throw new Error("error: domain should be 1 parameter");case 7:if((a=this.hasPattern||this.hasDomainPattern?this.generateTempRoles(n[0]):w(this.allDomains,n[0],new x)).hasRole(t,this.matchingFunc)){e.next=10;break}return e.abrupt("return",[]);case 10:return e.abrupt("return",i(a.values()).filter((function(e){return e.hasDirectRole(t)})).map((function(e){return e.name})));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"printRoles",value:(t=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(n.getLogger)().isEnable()&&i(this.allDomains.values()).forEach((function(e){Object(n.logPrint)(e.toString())}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},function(e,t){},function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return u}));var n=new(r(18).a);function o(e){n=e}function i(){return n}function a(){var e;(e=n).print.apply(e,arguments)}function u(e){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(t=n).printf.apply(t,[e].concat(o))}},function(e,t){},function(e,t){},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(6);function o(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function u(e){o(a,n,i,u,c,"next",e)}function c(e){o(a,n,i,u,c,"throw",e)}u(void 0)}))}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.policy=t}var t,r,o,u,c,s,f,l,p;return t=e,(r=[{key:"loadPolicy",value:(p=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.policy){e.next=2;break}throw new Error("Invalid policy, policy document cannot be false-y");case 2:return e.next=4,this.loadRules(t,n.a.loadPolicyLine);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"loadRules",value:(l=i(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.policy.split("\n").forEach((function(e,n){e.trim()&&r(e,t)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"savePolicy",value:(f=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"addPolicy",value:(s=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"removePolicy",value:(c=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"removeFilteredPolicy",value:(u=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return u.apply(this,arguments)})}])&&a(t.prototype,r),o&&a(t,o),e}()},function(e,t){},function(e,t){},function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return v}));var n=r(10),o=r(6),i=r(0);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function e(){d(this,e),this.g=[],this.p=[]},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,r,n,a,u,h,g,v=p(m);function m(e){var t;return d(this,m),(t=v.call(this,e)).filtered=!1,t}return t=m,r=[{key:"loadPolicy",value:(g=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filtered=!1,e.next=3,f(y(m.prototype),"loadPolicy",this).call(this,t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"loadFilteredPolicy",value:(h=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.next=3,this.loadPolicy(t);case 3:return e.abrupt("return");case 4:if(this.filePath){e.next=6;break}throw new Error("invalid file path, file path cannot be empty");case 6:return e.next=8,this.loadFilteredPolicyFile(t,r,o.a.loadPolicyLine);case 8:this.filtered=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"loadFilteredPolicyFile",value:(u=c(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.readFile)(this.filePath);case 2:e.sent.toString().split("\n").forEach((function(e,o){var i=e.trim();i&&!m.filterLine(i,r)&&n(i,t)}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"isFiltered",value:function(){return this.filtered}},{key:"savePolicy",value:(a=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.filtered){e.next=2;break}throw new Error("cannot save a filtered policy");case 2:return e.next=4,f(y(m.prototype),"savePolicy",this).call(this,t);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}],n=[{key:"filterLine",value:function(e,t){if(!t)return!1;var r=e.split(",");if(0===r.length)return!0;var n=[];switch(r[0].trim()){case"p":n=t.p;break;case"g":n=t.g}return m.filterWords(r,n)}},{key:"filterWords",value:function(e,t){if(e.length<t.length+1)return!0;for(var r=!1,n=0;n<t.length;n++)if(t[n]&&t[n].trim()!==t[n+1].trim()){r=!0;break}return r}}],r&&s(t.prototype,r),n&&s(t,n),m}(n.a)},function(e,t){},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function u(e){o(a,n,i,u,c,"next",e)}function c(e){o(a,n,i,u,c,"throw",e)}u(void 0)}))}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return l}));var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,r,n,o,s,f=c(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),f.call(this,e)}return t=l,(r=[{key:"addPolicies",value:(s=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"removePolicies",value:(o=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return o.apply(this,arguments)})}])&&a(t.prototype,r),n&&a(t,n),l}(r(10).a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d}));var n=r(7);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(p,e);var t,r,n,o,i=l(p);function p(){var e;return u(this,p),(e=i.apply(this,arguments)).enableCache=!0,e.m=new Map,e}return t=p,r=[{key:"invalidateCache",value:function(){this.m=new Map}},{key:"setEnableCache",value:function(e){this.enableCache=e}},{key:"getCache",value:function(e){return this.m.get(e)}},{key:"setCache",value:function(e,t){this.m.set(e,t)}},{key:"enforce",value:(o=a(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,u,c,f,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r),o=0;o<r;o++)n[o]=l[o];if(this.enableCache){e.next=3;break}return e.abrupt("return",(i=s(h(p.prototype),"enforce",this)).call.apply(i,[this].concat(n)));case 3:if(a="",!(u=p.canCache.apply(p,n))){e.next=10;break}if(a=p.getCacheKey.apply(p,n),void 0===(c=this.getCache(a))){e.next=10;break}return e.abrupt("return",c);case 10:return e.next=12,(t=s(h(p.prototype),"enforce",this)).call.apply(t,[this].concat(n));case 12:return f=e.sent,u&&this.setCache(a,f),e.abrupt("return",f);case 15:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],n=[{key:"canCache",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every((function(e){return"string"==typeof e}))}},{key:"getCacheKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("$$")}}],r&&c(t.prototype,r),n&&c(t,n),p}(n.a);function d(){return g.apply(this,arguments)}function g(){return(g=a(regeneratorRuntime.mark((function e(){var t,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),o=0;o<t;o++)r[o]=i[o];return e.abrupt("return",n.c.apply(void 0,[y].concat(r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return v}));var n=r(7),o=r(51),i=r.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(X,e);var t,r,n,o,a,u,y,g,v,m,b,w,R,x,k,A,E,S,P,_,O,C,T,j,L,N,F,I,M,H,U,D,B,$,G,q,Y,K,W,z,V=h(X);function X(){var e;return s(this,X),(e=V.apply(this,arguments)).lock=new i.a,e}return t=X,(r=[{key:"setWatcher",value:function(e){var t=this;this.watcher=e,this.watcher.setUpdateCallback((function(){return t.loadPolicy()}))}},{key:"loadPolicy",value:(z=c(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"loadPolicy",this).call(this).finally((function(){return t.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"clearPolicy",value:function(){var e=this;this.lock.acquireAsync().then((function(){return l(d(X.prototype),"clearPolicy",e).call(e)})).finally((function(){return e.lock.release()}))}},{key:"savePolicy",value:(W=c(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"savePolicy",this).call(this).finally((function(){return t.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"buildRoleLinks",value:(K=c(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"buildRoleLinks",this).call(this).finally((function(){return t.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})},{key:"enforceWithSyncCompile",value:(Y=c(regeneratorRuntime.mark((function e(){var t,r,n,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(r=a.length,n=new Array(r),o=0;o<r;o++)n[o]=a[o];return e.abrupt("return",(t=l(d(X.prototype),"enforceWithSyncCompile",this)).call.apply(t,[this].concat(n)).finally((function(){return i.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"enforce",value:(q=c(regeneratorRuntime.mark((function e(){var t,r,n,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(r=a.length,n=new Array(r),o=0;o<r;o++)n[o]=a[o];return e.abrupt("return",(t=l(d(X.prototype),"enforce",this)).call.apply(t,[this].concat(n)).finally((function(){return i.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"getAllSubjects",value:(G=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedSubjects("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"getAllNamedSubjects",value:($=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getAllNamedSubjects",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return $.apply(this,arguments)})},{key:"getAllObjects",value:(B=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedObjects("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"getAllNamedObjects",value:(D=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getAllNamedObjects",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"getAllActions",value:(U=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedActions("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{key:"getAllNamedActions",value:(H=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getAllNamedActions",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"getAllRoles",value:(M=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllNamedRoles("g"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"getAllNamedRoles",value:(I=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getAllNamedRoles",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"getPolicy",value:(F=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getNamedPolicy("p"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"getFilteredPolicy",value:(N=c(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.getFilteredNamedPolicy.apply(this,["p",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getNamedPolicy",value:(L=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getNamedPolicy",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"getFilteredNamedPolicy",value:(j=c(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(o=c.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=c[a];return e.abrupt("return",(n=l(d(X.prototype),"getFilteredNamedPolicy",this)).call.apply(n,[this,t,r].concat(i)).finally((function(){return u.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"getGroupingPolicy",value:(T=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getNamedGroupingPolicy("g"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"getFilteredGroupingPolicy",value:(C=c(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.getFilteredNamedGroupingPolicy.apply(this,["g",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"getNamedGroupingPolicy",value:(O=c(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:return e.abrupt("return",l(d(X.prototype),"getNamedGroupingPolicy",this).call(this,t).finally((function(){return r.lock.release()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"getFilteredNamedGroupingPolicy",value:(_=c(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(o=c.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=c[a];return e.abrupt("return",(n=l(d(X.prototype),"getFilteredNamedGroupingPolicy",this)).call.apply(n,[this,t,r].concat(i)).finally((function(){return u.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return _.apply(this,arguments)})},{key:"hasPolicy",value:(P=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.hasNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"hasNamedPolicy",value:(S=c(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(n=u.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=u[i];return e.abrupt("return",(r=l(d(X.prototype),"hasNamedPolicy",this)).call.apply(r,[this,t].concat(o)).finally((function(){return a.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"addPolicy",value:(E=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.addNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"addNamedPolicy",value:(A=c(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(n=u.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=u[i];return e.abrupt("return",(r=l(d(X.prototype),"addNamedPolicy",this)).call.apply(r,[this,t].concat(o)).finally((function(){return a.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"removePolicy",value:(k=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.removeNamedPolicy.apply(this,["p"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"removeFilteredPolicy",value:(x=c(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removeFilteredNamedPolicy.apply(this,["p",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"removeNamedPolicy",value:(R=c(regeneratorRuntime.mark((function e(t){var r,n,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(r=a.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=a[o];return e.abrupt("return",this.removePolicyInternal("p",t,n).finally((function(){return i.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"removeFilteredNamedPolicy",value:(w=c(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(o=c.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=c[a];return e.abrupt("return",(n=l(d(X.prototype),"removeFilteredNamedPolicy",this)).call.apply(n,[this,t,r].concat(i)).finally((function(){return u.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"hasGroupingPolicy",value:(b=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.hasNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"hasNamedGroupingPolicy",value:(m=c(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(n=u.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=u[i];return e.abrupt("return",(r=l(d(X.prototype),"hasNamedGroupingPolicy",this)).call.apply(r,[this,t].concat(o)).finally((function(){return a.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"addGroupingPolicy",value:(v=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.addNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"addNamedGroupingPolicy",value:(g=c(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(n=u.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=u[i];return e.abrupt("return",(r=l(d(X.prototype),"addNamedGroupingPolicy",this)).call.apply(r,[this,t].concat(o)).finally((function(){return a.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"removeGroupingPolicy",value:(y=c(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",this.removeNamedGroupingPolicy.apply(this,["g"].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"removeFilteredGroupingPolicy",value:(u=c(regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=i[o];return e.abrupt("return",this.removeFilteredNamedGroupingPolicy.apply(this,["g",t].concat(n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"removeNamedGroupingPolicy",value:(a=c(regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(n=u.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=u[i];return e.abrupt("return",(r=l(d(X.prototype),"removeNamedGroupingPolicy",this)).call.apply(r,[this,t].concat(o)).finally((function(){return a.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"removeFilteredNamedGroupingPolicy",value:(o=c(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,u=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquireAsync();case 2:for(o=c.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=c[a];return e.abrupt("return",(n=l(d(X.prototype),"removeFilteredNamedGroupingPolicy",this)).call.apply(n,[this,t,r].concat(i)).finally((function(){return u.lock.release()})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})}])&&f(t.prototype,r),n&&f(t,n),X}(n.a);function v(){return m.apply(this,arguments)}function m(){return(m=c(regeneratorRuntime.mark((function e(){var t,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),o=0;o<t;o++)r[o]=i[o];return e.abrupt("return",n.c.apply(void 0,[g].concat(r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}function u(e,t){return c.apply(this,arguments)}function c(){return(c=a(regeneratorRuntime.mark((function e(t,r){var o,i,a,u,c,s,f,l,p,h,y,d,g,v,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},y=t.getModel().model,d="",d+="[request_definition]\n",d+="r = ".concat(null===(o=y.get("r"))||void 0===o||null===(i=o.get("r"))||void 0===i?void 0:i.value.replace(/_/g,"."),"\n"),d+="[policy_definition]\n",d+="p = ".concat(null===(a=y.get("p"))||void 0===a||null===(u=a.get("p"))||void 0===u?void 0:u.value.replace(/_/g,"."),"\n"),void 0!==(null===(c=y.get("g"))||void 0===c?void 0:c.get("g"))&&(d+="[role_definition]\n",d+="g = ".concat(null===(g=y.get("g"))||void 0===g||null===(v=g.get("g"))||void 0===v?void 0:v.value,"\n")),d+="[policy_effect]\n",d+="e = ".concat(null===(s=y.get("e"))||void 0===s||null===(f=s.get("e"))||void 0===f?void 0:f.value.replace(/_/g,"."),"\n"),d+="[matchers]\n",d+="m = ".concat(null===(l=y.get("m"))||void 0===l||null===(p=l.get("m"))||void 0===p?void 0:p.value.replace(/_/g,".")),h.m=d,e.next=15,t.getPolicy();case 15:h.p=e.sent,m=n(h.p);try{for(m.s();!(b=m.n()).done;)b.value.splice(0,0,"p")}catch(e){m.e(e)}finally{m.f()}return e.abrupt("return",JSON.stringify(h));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.d(t,"a",(function(){return u}))},function(e,t,r){"use strict";const n=r(32),o=r(80),i=r(87),a=r(15),u=e=>"string"==typeof e&&(""===e||"./"===e),c=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,o=new Set,a=new Set,u=0,c=e=>{a.add(e.output),r&&r.onResult&&r.onResult(e)};for(let a=0;a<t.length;a++){let s=i(String(t[a]),{...r,onResult:c},!0),f=s.state.negated||s.state.negatedExtglob;f&&u++;for(let t of e){let e=s(t,!0);(f?!e.isMatch:e.isMatch)&&(f?n.add(e.output):(n.delete(e.output),o.add(e.output)))}}let s=(u===t.length?[...a]:[...o]).filter(e=>!n.has(e));if(r&&0===s.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return s};c.match=c,c.matcher=(e,t)=>i(e,t),c.any=c.isMatch=(e,t,r)=>i(t,r)(e),c.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,o=[],i=c(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),o.push(e.output)}});for(let e of o)i.includes(e)||n.add(e);return[...n]},c.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>c.contains(e,t,r));if("string"==typeof t){if(u(e)||u(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return c.isMatch(e,t,{...r,contains:!0})},c.matchKeys=(e,t,r)=>{if(!a.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=c(Object.keys(e),t,r),o={};for(let t of n)o[t]=e[t];return o},c.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(n.some(e=>t(e)))return!0}return!1},c.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},c.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>i(t,r)(e))},c.capture=(e,t,r)=>{let n=a.isWindows(r),o=i.makeRe(String(e),{...r,capture:!0}).exec(n?a.toPosixSlashes(t):t);if(o)return o.slice(1).map(e=>void 0===e?"":e)},c.makeRe=(...e)=>i.makeRe(...e),c.scan=(...e)=>i.scan(...e),c.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of o(String(n),t))r.push(i.parse(e,t));return r},c.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:o(e,t)},c.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return c.braces(e,{...t,expand:!0})},e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._acquired=!1,this._waitingResolvers=[]}get acquired(){return this._acquired}acquireAsync(){return this._acquired?new Promise(e=>{this._waitingResolvers.push(e)}):(this._acquired=!0,Promise.resolve())}tryAcquire(){return!this._acquired&&(this._acquired=!0,!0)}release(){if(!this._acquired)throw new Error("Cannot release an unacquired lock");if(this._waitingResolvers.length>0){this._waitingResolvers.shift()()}else this._acquired=!1}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(53),t)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function u(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Authorizer=void 0;var f=s(r(54)),l=i(r(72)),p=s(r(92)),h=i(r(93)),y=function(){function e(e,t){if(void 0===e&&(e="manual"),void 0===t&&(t={}),this.endpoint=void 0,this.cookieKey=void 0,this.cacheExpiredTime=60,"auto"==e){if(!t.endpoint)throw new Error("Specify the endpoint when initializing casbin.js with mode == 'auto'");this.mode=e,this.endpoint=t.endpoint,null!==t.cacheExpiredTime&&void 0!==t.cacheExpiredTime&&(this.cacheExpiredTime=t.cacheExpiredTime)}else{if("cookies"==e)throw Error("Cookie mode not implemented.");if("manual"!=e)throw new Error("Casbin.js mode can only be one of the 'auto', 'cookies' and 'manual'");this.mode=e}}return e.prototype.getPermission=function(){var e;if(void 0!==this.permission)return null===(e=this.permission)||void 0===e?void 0:e.getPermissionJsonObject();throw Error("Permission is not defined. Are you using manual mode and have set the permission?")},e.prototype.setPermission=function(e){void 0===this.permission&&(this.permission=new p.default),this.permission.load(e)},e.prototype.initEnforcer=function(e){return a(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,f,p,h;return u(this,(function(u){switch(u.label){case 0:if("string"==typeof e)t=JSON.parse(e);else{if("[object Object]"!==Object.prototype.toString.call(e))throw Error("No params when init enforcer.");t=e}if(!("m"in t))throw Error("No model when init enforcer.");return r=l.newModelFromString(t.m),n=this,[4,l.newEnforcer(r)];case 1:if(n.enforcer=u.sent(),!("p"in t)||"[object Array]"!==Object.prototype.toString.call(t.p))return[3,5];o=0,i=t.p,u.label=2;case 2:return o<i.length?(f=i[o],[4,(p=this.enforcer).addPolicy.apply(p,f.slice(1,f.length).map((function(e){return e.trim()})))]):[3,5];case 3:u.sent(),u.label=4;case 4:return o++,[3,2];case 5:if(!("g"in t)||"[object Array]"!==Object.prototype.toString.call(t.g))return[3,9];a=0,s=t.g,u.label=6;case 6:return a<s.length?(f=s[a],[4,(h=this.enforcer).addNamedGroupingPolicy.apply(h,c([f[0].trim()],f.slice(1,f.length).map((function(e){return e.trim()}))))]):[3,9];case 7:u.sent(),u.label=8;case 8:return a++,[3,6];case 9:return[2]}}))}))},e.prototype.getEnforcerDataFromSvr=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:if(void 0===this.endpoint||null===this.endpoint)throw Error("Endpoint is null or not specified.");return[4,f.default.get(this.endpoint+"?subject="+this.user)];case 1:return[2,e.sent().data.data]}}))}))},e.prototype.setUser=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(r){switch(r.label){case 0:return"auto"!=this.mode||e===this.user?[3,4]:(this.user=e,null!==(t=h.loadFromLocalStorage(e))?[3,2]:[4,this.getEnforcerDataFromSvr()]);case 1:t=r.sent(),h.saveToLocalStorage(e,t,this.cacheExpiredTime),r.label=2;case 2:return[4,this.initEnforcer(t)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype.removeCache=function(){this.user&&h.removeLocalStorage(this.user)},e.prototype.can=function(e,t,r){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return"manual"!=this.mode?[3,1]:[2,void 0!==this.permission&&this.permission.check(e,t)];case 1:if("auto"!=this.mode)return[3,7];if(void 0!==this.enforcer)return[3,2];throw Error("Enforcer not initialized");case 2:return void 0===r?[3,4]:[4,this.enforcer.enforce(this.user,r,t,e)];case 3:return[2,n.sent()];case 4:return[4,this.enforcer.enforce(this.user,t,e)];case 5:return[2,n.sent()];case 6:return[3,8];case 7:throw Error("Mode "+this.mode+" not recognized.");case 8:return[2]}}))}))},e.prototype.cannot=function(e,t,r){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this.can(e,t,r)];case 1:return[2,!n.sent()]}}))}))},e.prototype.canAll=function(e,t,r){return a(this,void 0,void 0,(function(){var n;return u(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<t.length?[4,this.cannot(e,t[n],r)]:[3,4];case 2:if(o.sent())return[2,!1];o.label=3;case 3:return++n,[3,1];case 4:return[2,!0]}}))}))},e.prototype.canAny=function(e,t,r){return a(this,void 0,void 0,(function(){var n;return u(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<t.length?[4,this.can(e,t[n],r)]:[3,4];case 2:if(o.sent())return[2,!0];o.label=3;case 3:return++n,[3,1];case 4:return[2,!1]}}))}))},e}();t.Authorizer=y},function(e,t,r){e.exports=r(55)},function(e,t,r){"use strict";var n=r(2),o=r(23),i=r(56),a=r(29);function u(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var c=u(r(26));c.Axios=i,c.create=function(e){return u(a(c.defaults,e))},c.Cancel=r(30),c.CancelToken=r(69),c.isCancel=r(25),c.all=function(e){return Promise.all(e)},c.spread=r(70),c.isAxiosError=r(71),e.exports=c,e.exports.default=c},function(e,t,r){"use strict";var n=r(2),o=r(24),i=r(57),a=r(58),u=r(29);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=u(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,r){return this.request(u(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,r,n){return this.request(u(n||{},{method:e,url:t,data:r}))}})),e.exports=c},function(e,t,r){"use strict";var n=r(2);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,r){"use strict";var n=r(2),o=r(59),i=r(25),a=r(26);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(28);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(o)&&u.push("path="+o),n.isString(i)&&u.push("domain="+i),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(65),o=r(66);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},function(e,t,r){"use strict";var n=r(2);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(30);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,r){"use strict";r.r(t);var n=r(0);r.d(t,"Util",(function(){return n}));var o=r(11);r.d(t,"Config",(function(){return o.a}));var i=r(7);r.d(t,"Enforcer",(function(){return i.a})),r.d(t,"newEnforcerWithClass",(function(){return i.c})),r.d(t,"newEnforcer",(function(){return i.b}));var a=r(47);r.d(t,"CachedEnforcer",(function(){return a.a})),r.d(t,"newCachedEnforcer",(function(){return a.b}));var u=r(48);r.d(t,"SyncedEnforcer",(function(){return u.a})),r.d(t,"newSyncedEnforcer",(function(){return u.b}));var c=r(4);for(var s in c)["default","Util","Config","Enforcer","newEnforcerWithClass","newEnforcer","CachedEnforcer","newCachedEnforcer","SyncedEnforcer","newSyncedEnforcer"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return c[e]}))}(s);var f=r(3);r.d(t,"Assertion",(function(){return f.a})),r.d(t,"FunctionMap",(function(){return f.b})),r.d(t,"sectionNameMap",(function(){return f.i})),r.d(t,"PolicyOp",(function(){return f.d})),r.d(t,"requiredSections",(function(){return f.h})),r.d(t,"Model",(function(){return f.c})),r.d(t,"newModel",(function(){return f.e})),r.d(t,"newModelFromFile",(function(){return f.f})),r.d(t,"newModelFromString",(function(){return f.g}));var l=r(12);for(var s in l)["default","Util","Config","Enforcer","newEnforcerWithClass","newEnforcer","CachedEnforcer","newCachedEnforcer","SyncedEnforcer","newSyncedEnforcer","Assertion","FunctionMap","sectionNameMap","PolicyOp","requiredSections","Model","newModel","newModelFromFile","newModelFromString"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return l[e]}))}(s);var p=r(9);for(var s in p)["default","Util","Config","Enforcer","newEnforcerWithClass","newEnforcer","CachedEnforcer","newCachedEnforcer","SyncedEnforcer","newSyncedEnforcer","Assertion","FunctionMap","sectionNameMap","PolicyOp","requiredSections","Model","newModel","newModelFromFile","newModelFromString"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return p[e]}))}(s);var h=r(1);for(var s in h)["default","Util","Config","Enforcer","newEnforcerWithClass","newEnforcer","CachedEnforcer","newCachedEnforcer","SyncedEnforcer","newSyncedEnforcer","Assertion","FunctionMap","sectionNameMap","PolicyOp","requiredSections","Model","newModel","newModelFromFile","newModelFromString"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return h[e]}))}(s);var y=r(49);r.d(t,"casbinJsGetPermissionForUser",(function(){return y.a}))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=s(e),a=n[0],u=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,u)),f=0,l=u>0?a-4:a;for(r=0;r<l;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[f++]=t>>16&255,c[f++]=t>>8&255,c[f++]=255&t;2===u&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[f++]=255&t);1===u&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[f++]=t>>8&255,c[f++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],a=0,u=r-o;a<u;a+=16383)i.push(f(e,a,a+16383>u?u:a+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)n[u]=a[u],o[a.charCodeAt(u)]=u;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function f(e,t,r){for(var o,i,a=[],u=t;u<r;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,o){var i,a,u=8*o-n-1,c=(1<<u)-1,s=c>>1,f=-7,l=r?o-1:0,p=r?-1:1,h=e[t+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=u;f>0;i=256*i+e[t+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+e[t+l],l+=p,f-=8);if(0===i)i=1-s;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=s}return(h?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,u,c,s=8*i-o-1,f=(1<<s)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,y=n?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?p/c:p*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(t*c-1)*Math.pow(2,o),a+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&u,h+=y,u/=256,o-=8);for(a=a<<o|u,s+=o;s>0;e[r+h]=255&a,h+=y,a/=256,s-=8);e[r+h-y]|=128*d}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";const n=r(19),o=r(81),i=r(84),a=r(85),u=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=u.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(u.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};u.parse=(e,t={})=>a(e,t),u.stringify=(e,t={})=>n("string"==typeof e?u.parse(e,t):e,t),u.compile=(e,t={})=>("string"==typeof e&&(e=u.parse(e,t)),o(e,t)),u.expand=(e,t={})=>{"string"==typeof e&&(e=u.parse(e,t));let r=i(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},u.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?u.compile(e,t):u.expand(e,t),e.exports=u},function(e,t,r){"use strict";const n=r(33),o=r(20);e.exports=(e,t={})=>{let r=(e,i={})=>{let a=o.isInvalidBrace(i),u=!0===e.invalid&&!0===t.escapeInvalid,c=!0===a||!0===u,s=!0===t.escapeInvalid?"\\":"",f="";if(!0===e.isOpen)return s+e.value;if(!0===e.isClose)return s+e.value;if("open"===e.type)return c?s+e.value:"(";if("close"===e.type)return c?s+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=o.reduce(e.nodes),i=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==i.length)return r.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let t of e.nodes)f+=r(t,e);return f};return r(e)}},function(e,t,r){"use strict";
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const n=r(83),o=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};"boolean"==typeof i.strictZeros&&(i.relaxZeros=!1===i.strictZeros);let c=e+":"+t+"="+String(i.relaxZeros)+String(i.shorthand)+String(i.capture)+String(i.wrap);if(o.cache.hasOwnProperty(c))return o.cache[c].result;let s=Math.min(e,t),f=Math.max(e,t);if(1===Math.abs(s-f)){let r=e+"|"+t;return i.capture?`(${r})`:!1===i.wrap?r:`(?:${r})`}let l=y(e)||y(t),p={min:e,max:t,a:s,b:f},h=[],d=[];if(l&&(p.isPadded=l,p.maxLen=String(p.max).length),s<0){d=a(f<0?Math.abs(f):1,Math.abs(s),p,i),s=p.a=0}return f>=0&&(h=a(s,f,p,i)),p.negatives=d,p.positives=h,p.result=function(e,t,r){let n=u(e,t,"-",!1,r)||[],o=u(t,e,"",!1,r)||[],i=u(e,t,"-?",!0,r)||[];return n.concat(i).concat(o).join("|")}(d,h,i),!0===i.capture?p.result=`(${p.result})`:!1!==i.wrap&&h.length+d.length>1&&(p.result=`(?:${p.result})`),o.cache[c]=p,p.result};function i(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),o=n.length,i="",a=0;for(let e=0;e<o;e++){let[t,o]=n[e];t===o?i+=t:"0"!==t||"9"!==o?i+=h(t,o,r):a++}return a&&(i+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:i,count:[a],digits:o}}function a(e,t,r,n){let o,a=function(e,t){let r=1,n=1,o=f(e,r),i=new Set([t]);for(;e<=o&&o<=t;)i.add(o),r+=1,o=f(e,r);for(o=l(t+1,n)-1;e<o&&o<=t;)i.add(o),n+=1,o=l(t+1,n)-1;return i=[...i],i.sort(c),i}(e,t),u=[],s=e;for(let e=0;e<a.length;e++){let t=a[e],c=i(String(s),String(t),n),f="";r.isPadded||!o||o.pattern!==c.pattern?(r.isPadded&&(f=d(t,r,n)),c.string=f+c.pattern+p(c.count),u.push(c),s=t+1,o=c):(o.count.length>1&&o.count.pop(),o.count.push(c.count[0]),o.string=o.pattern+p(o.count),s=t+1)}return u}function u(e,t,r,n,o){let i=[];for(let o of e){let{string:e}=o;n||s(t,"string",e)||i.push(r+e),n&&s(t,"string",e)&&i.push(r+e)}return i}function c(e,t){return e>t?1:t>e?-1:0}function s(e,t,r){return e.some(e=>e[t]===r)}function f(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function l(e,t){return e-e%Math.pow(10,t)}function p(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function h(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function y(e){return/^-?(0+)\d/.test(e)}function d(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),o=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return o?"0?":"0";case 2:return o?"0{0,2}":"00";default:return o?`0{0,${n}}`:`0{${n}}`}}o.cache={},o.clearCache=()=>o.cache={},e.exports=o},function(e,t,r){"use strict";
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,r){"use strict";const n=r(33),o=r(19),i=r(20),a=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?i.flatten(t).map(e=>`{${e}}`):t;for(let o of e)if(Array.isArray(o))for(let e of o)n.push(a(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?a(o,e,r):o+e);return i.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,u=(e,c={})=>{e.queue=[];let s=c,f=c.queue;for(;"brace"!==s.type&&"root"!==s.type&&s.parent;)s=s.parent,f=s.queue;if(e.invalid||e.dollar)return void f.push(a(f.pop(),o(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void f.push(a(f.pop(),["{}"]));if(e.nodes&&e.ranges>0){let u=i.reduce(e.nodes);if(i.exceedsLimit(...u,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=n(...u,t);return 0===c.length&&(c=o(e,t)),f.push(a(f.pop(),c)),void(e.nodes=[])}let l=i.encloseBrace(e),p=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,p=h.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?p.push(a(p.pop(),r.value)):r.nodes&&u(r,e):f.push(a(f.pop(),p,l)):(1===t&&p.push(""),p.push(""))}return p};return i.flatten(u(e))}},function(e,t,r){"use strict";const n=r(19),{MAX_LENGTH:o,CHAR_BACKSLASH:i,CHAR_BACKTICK:a,CHAR_COMMA:u,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:s,CHAR_RIGHT_PARENTHESES:f,CHAR_LEFT_CURLY_BRACE:l,CHAR_RIGHT_CURLY_BRACE:p,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:y,CHAR_DOUBLE_QUOTE:d,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:v,CHAR_ZERO_WIDTH_NOBREAK_SPACE:m}=r(86);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let w,R={type:"root",input:e,nodes:[]},x=[R],k=R,A=R,E=0,S=e.length,P=0,_=0;const O=()=>e[P++],C=e=>{if("text"===e.type&&"dot"===A.type&&(A.type="text"),!A||"text"!==A.type||"text"!==e.type)return k.nodes.push(e),e.parent=k,e.prev=A,A=e,e;A.value+=e.value};for(C({type:"bos"});P<S;)if(k=x[x.length-1],w=O(),w!==m&&w!==v)if(w!==i)if(w!==y)if(w!==h)if(w!==s)if(w!==f)if(w!==d&&w!==g&&w!==a)if(w!==l)if(w!==p)if(w===u&&_>0){if(k.ranges>0){k.ranges=0;let e=k.nodes.shift();k.nodes=[e,{type:"text",value:n(k)}]}C({type:"comma",value:w}),k.commas++}else if(w===c&&_>0&&0===k.commas){let e=k.nodes;if(0===_||0===e.length){C({type:"text",value:w});continue}if("dot"===A.type){if(k.range=[],A.value+=w,A.type="range",3!==k.nodes.length&&5!==k.nodes.length){k.invalid=!0,k.ranges=0,A.type="text";continue}k.ranges++,k.args=[];continue}if("range"===A.type){e.pop();let t=e[e.length-1];t.value+=A.value+w,A=t,k.ranges--;continue}C({type:"dot",value:w})}else C({type:"text",value:w});else{if("brace"!==k.type){C({type:"text",value:w});continue}let e="close";k=x.pop(),k.close=!0,C({type:e,value:w}),_--,k=x[x.length-1]}else{_++;let e=A.value&&"$"===A.value.slice(-1)||!0===k.dollar;k=C({type:"brace",open:!0,close:!1,dollar:e,depth:_,commas:0,ranges:0,nodes:[]}),x.push(k),C({type:"open",value:w})}else{let e,r=w;for(!0!==t.keepQuotes&&(w="");P<S&&(e=O());)if(e!==i){if(e===r){!0===t.keepQuotes&&(w+=e);break}w+=e}else w+=e+O();C({type:"text",value:w})}else{if("paren"!==k.type){C({type:"text",value:w});continue}k=x.pop(),C({type:"text",value:w}),k=x[x.length-1]}else k=C({type:"paren",nodes:[]}),x.push(k),C({type:"text",value:w});else{E++;let e;for(;P<S&&(e=O());)if(w+=e,e!==h)if(e!==i){if(e===y&&(E--,0===E))break}else w+=O();else E++;C({type:"text",value:w})}else C({type:"text",value:"\\"+w});else C({type:"text",value:(t.keepEscaping?w:"")+O()});do{if(k=x.pop(),"root"!==k.type){k.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=x[x.length-1],t=e.nodes.indexOf(k);e.nodes.splice(t,1,...k.nodes)}}while(x.length>0);return C({type:"eos"}),R}},function(e,t,r){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,r){"use strict";e.exports=r(88)},function(e,t,r){"use strict";const n=r(21),o=r(89),i=r(90),a=r(15),u=r(16),c=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map(e=>c(e,t,r));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(o=e)&&"object"==typeof o&&!Array.isArray(o)&&e.tokens&&e.input;var o;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const i=t||{},u=a.isWindows(t),s=n?c.compileRe(e,t):c.makeRe(e,t,!1,!0),f=s.state;delete s.state;let l=()=>!1;if(i.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};l=c(i.ignore,e,r)}const p=(r,n=!1)=>{const{isMatch:o,match:a,output:p}=c.test(r,s,t,{glob:e,posix:u}),h={glob:e,state:f,regex:s,posix:u,input:r,output:p,match:a,isMatch:o};return"function"==typeof i.onResult&&i.onResult(h),!1===o?(h.isMatch=!1,!!n&&h):l(r)?("function"==typeof i.onIgnore&&i.onIgnore(h),h.isMatch=!1,!!n&&h):("function"==typeof i.onMatch&&i.onMatch(h),!n||h)};return r&&(p.state=f),p};c.test=(e,t,r,{glob:n,posix:o}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=r||{},u=i.format||(o?a.toPosixSlashes:null);let s=e===n,f=s&&u?u(e):e;return!1===s&&(f=u?u(e):e,s=f===n),!1!==s&&!0!==i.capture||(s=!0===i.matchBase||!0===i.basename?c.matchBase(e,t,r,o):t.exec(f)),{isMatch:Boolean(s),match:s,output:f}},c.matchBase=(e,t,r,o=a.isWindows(r))=>(t instanceof RegExp?t:c.makeRe(t,r)).test(n.basename(e)),c.isMatch=(e,t,r)=>c(t,r)(e),c.parse=(e,t)=>Array.isArray(e)?e.map(e=>c.parse(e,t)):i(e,{...t,fastpaths:!1}),c.scan=(e,t)=>o(e,t),c.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const o=t||{},i=o.contains?"":"^",a=o.contains?"":"$";let u=`${i}(?:${e.output})${a}`;e&&!0===e.negated&&(u=`^(?!${u}).*$`);const s=c.toRegex(u,t);return!0===n&&(s.state=e),s},c.makeRe=(e,t,r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const o=t||{};let a,u={negated:!1,fastpaths:!0},s="";return e.startsWith("./")&&(e=e.slice(2),s=u.prefix="./"),!1===o.fastpaths||"."!==e[0]&&"*"!==e[0]||(a=i.fastpaths(e,t)),void 0===a?(u=i(e,t),u.prefix=s+(u.prefix||"")):u.output=a,c.compileRe(u,t,r,n)},c.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=u,e.exports=c},function(e,t,r){"use strict";const n=r(15),{CHAR_ASTERISK:o,CHAR_AT:i,CHAR_BACKWARD_SLASH:a,CHAR_COMMA:u,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:s,CHAR_FORWARD_SLASH:f,CHAR_LEFT_CURLY_BRACE:l,CHAR_LEFT_PARENTHESES:p,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:y,CHAR_QUESTION_MARK:d,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:v,CHAR_RIGHT_SQUARE_BRACKET:m}=r(16),b=e=>e===f||e===a,w=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},R=e.length-1,x=!0===r.parts||!0===r.scanToEnd,k=[],A=[],E=[];let S,P,_=e,O=-1,C=0,T=0,j=!1,L=!1,N=!1,F=!1,I=!1,M=!1,H=!1,U=!1,D=!1,B=0,$={value:"",depth:0,isGlob:!1};const G=()=>O>=R,q=()=>(S=P,_.charCodeAt(++O));for(;O<R;){let e;if(P=q(),P!==a){if(!0===M||P===l){for(B++;!0!==G()&&(P=q());)if(P!==a)if(P!==l){if(!0!==M&&P===c&&(P=q())===c){if(j=$.isBrace=!0,N=$.isGlob=!0,D=!0,!0===x)continue;break}if(!0!==M&&P===u){if(j=$.isBrace=!0,N=$.isGlob=!0,D=!0,!0===x)continue;break}if(P===g&&(B--,0===B)){M=!1,j=$.isBrace=!0,D=!0;break}}else B++;else H=$.backslashes=!0,q();if(!0===x)continue;break}if(P!==f){if(!0!==r.noext){if(!0===(P===y||P===i||P===o||P===d||P===s)&&_.charCodeAt(O+1)===p){if(N=$.isGlob=!0,F=$.isExtglob=!0,D=!0,!0===x){for(;!0!==G()&&(P=q());)if(P!==a){if(P===v){N=$.isGlob=!0,D=!0;break}}else H=$.backslashes=!0,P=q();continue}break}}if(P===o){if(S===o&&(I=$.isGlobstar=!0),N=$.isGlob=!0,D=!0,!0===x)continue;break}if(P===d){if(N=$.isGlob=!0,D=!0,!0===x)continue;break}if(P===h)for(;!0!==G()&&(e=q());)if(e!==a){if(e===m){if(L=$.isBracket=!0,N=$.isGlob=!0,D=!0,!0===x)continue;break}}else H=$.backslashes=!0,q();if(!0===r.nonegate||P!==s||O!==C){if(!0!==r.noparen&&P===p){if(N=$.isGlob=!0,!0===x){for(;!0!==G()&&(P=q());)if(P!==p){if(P===v){D=!0;break}}else H=$.backslashes=!0,P=q();continue}break}if(!0===N){if(D=!0,!0===x)continue;break}}else U=$.negated=!0,C++}else{if(k.push(O),A.push($),$={value:"",depth:0,isGlob:!1},!0===D)continue;if(S===c&&O===C+1){C+=2;continue}T=O+1}}else H=$.backslashes=!0,P=q(),P===l&&(M=!0)}!0===r.noext&&(F=!1,N=!1);let Y=_,K="",W="";C>0&&(K=_.slice(0,C),_=_.slice(C),T-=C),Y&&!0===N&&T>0?(Y=_.slice(0,T),W=_.slice(T)):!0===N?(Y="",W=_):Y=_,Y&&""!==Y&&"/"!==Y&&Y!==_&&b(Y.charCodeAt(Y.length-1))&&(Y=Y.slice(0,-1)),!0===r.unescape&&(W&&(W=n.removeBackslashes(W)),Y&&!0===H&&(Y=n.removeBackslashes(Y)));const z={prefix:K,input:e,start:C,base:Y,glob:W,isBrace:j,isBracket:L,isGlob:N,isExtglob:F,isGlobstar:I,negated:U};if(!0===r.tokens&&(z.maxDepth=0,b(P)||A.push($),z.tokens=A),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<k.length;n++){const o=t?t+1:C,i=k[n],a=e.slice(o,i);r.tokens&&(0===n&&0!==C?(A[n].isPrefix=!0,A[n].value=K):A[n].value=a,w(A[n]),z.maxDepth+=A[n].depth),0===n&&""===a||E.push(a),t=i}if(t&&t+1<e.length){const n=e.slice(t+1);E.push(n),r.tokens&&(A[A.length-1].value=n,w(A[A.length-1]),z.maxDepth+=A[A.length-1].depth)}z.slashes=k,z.parts=E}return z}},function(e,t,r){"use strict";const n=r(16),o=r(15),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:a,REGEX_NON_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:s}=n,f=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>o.escapeRegex(e)).join("..")}return r},l=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,p=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=s[e]||e;const r={...t},p="number"==typeof r.maxLength?Math.min(i,r.maxLength):i;let h=e.length;if(h>p)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${p}`);const y={type:"bos",value:"",output:r.prepend||""},d=[y],g=r.capture?"":"?:",v=o.isWindows(t),m=n.globChars(v),b=n.extglobChars(m),{DOT_LITERAL:w,PLUS_LITERAL:R,SLASH_LITERAL:x,ONE_CHAR:k,DOTS_SLASH:A,NO_DOT:E,NO_DOT_SLASH:S,NO_DOTS_SLASH:P,QMARK:_,QMARK_NO_DOT:O,STAR:C,START_ANCHOR:T}=m,j=e=>`(${g}(?:(?!${T}${e.dot?A:w}).)*?)`,L=r.dot?"":E,N=r.dot?_:O;let F=!0===r.bash?j(r):C;r.capture&&(F=`(${F})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const I={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:d};e=o.removePrefix(e,I),h=e.length;const M=[],H=[],U=[];let D,B=y;const $=()=>I.index===h-1,G=I.peek=(t=1)=>e[I.index+t],q=I.advance=()=>e[++I.index],Y=()=>e.slice(I.index+1),K=(e="",t=0)=>{I.consumed+=e,I.index+=t},W=e=>{I.output+=null!=e.output?e.output:e.value,K(e.value)},z=()=>{let e=1;for(;"!"===G()&&("("!==G(2)||"?"===G(3));)q(),I.start++,e++;return e%2!=0&&(I.negated=!0,I.start++,!0)},V=e=>{I[e]++,U.push(e)},X=e=>{I[e]--,U.pop()},Q=e=>{if("globstar"===B.type){const t=I.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||M.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(I.output=I.output.slice(0,-B.output.length),B.type="star",B.value="*",B.output=F,I.output+=B.output)}if(M.length&&"paren"!==e.type&&!b[e.value]&&(M[M.length-1].inner+=e.value),(e.value||e.output)&&W(e),B&&"text"===B.type&&"text"===e.type)return B.value+=e.value,void(B.output=(B.output||"")+e.value);e.prev=B,d.push(e),B=e},J=(e,t)=>{const n={...b[t],conditions:1,inner:""};n.prev=B,n.parens=I.parens,n.output=I.output;const o=(r.capture?"(":"")+n.open;V("parens"),Q({type:e,value:t,output:I.output?"":k}),Q({type:"paren",extglob:!0,value:q(),output:o}),M.push(n)},Z=e=>{let t=e.close+(r.capture?")":"");if("negate"===e.type){let n=F;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(n=j(r)),(n!==F||$()||/^\)+$/.test(Y()))&&(t=e.close=")$))"+n),"bos"===e.prev.type&&$()&&(I.negatedExtglob=!0)}Q({type:"paren",extglob:!0,value:D,output:t}),X("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,i=e.replace(c,(e,t,r,o,i,a)=>"\\"===o?(n=!0,e):"?"===o?t?t+o+(i?_.repeat(i.length):""):0===a?N+(i?_.repeat(i.length):""):_.repeat(r.length):"."===o?w.repeat(r.length):"*"===o?t?t+o+(i?F:""):F:t?e:"\\"+e);return!0===n&&(i=!0===r.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),i===e&&!0===r.contains?(I.output=e,I):(I.output=o.wrapOutput(i,I,t),I)}for(;!$();){if(D=q(),"\0"===D)continue;if("\\"===D){const e=G();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){D+="\\",Q({type:"text",value:D});continue}const t=/^\\+/.exec(Y());let n=0;if(t&&t[0].length>2&&(n=t[0].length,I.index+=n,n%2!=0&&(D+="\\")),!0===r.unescape?D=q()||"":D+=q()||"",0===I.brackets){Q({type:"text",value:D});continue}}if(I.brackets>0&&("]"!==D||"["===B.value||"[^"===B.value)){if(!1!==r.posix&&":"===D){const e=B.value.slice(1);if(e.includes("[")&&(B.posix=!0,e.includes(":"))){const e=B.value.lastIndexOf("["),t=B.value.slice(0,e),r=B.value.slice(e+2),n=a[r];if(n){B.value=t+n,I.backtrack=!0,q(),y.output||1!==d.indexOf(B)||(y.output=k);continue}}}("["===D&&":"!==G()||"-"===D&&"]"===G())&&(D="\\"+D),"]"!==D||"["!==B.value&&"[^"!==B.value||(D="\\"+D),!0===r.posix&&"!"===D&&"["===B.value&&(D="^"),B.value+=D,W({value:D});continue}if(1===I.quotes&&'"'!==D){D=o.escapeRegex(D),B.value+=D,W({value:D});continue}if('"'===D){I.quotes=1===I.quotes?0:1,!0===r.keepQuotes&&Q({type:"text",value:D});continue}if("("===D){V("parens"),Q({type:"paren",value:D});continue}if(")"===D){if(0===I.parens&&!0===r.strictBrackets)throw new SyntaxError(l("opening","("));const e=M[M.length-1];if(e&&I.parens===e.parens+1){Z(M.pop());continue}Q({type:"paren",value:D,output:I.parens?")":"\\)"}),X("parens");continue}if("["===D){if(!0!==r.nobracket&&Y().includes("]"))V("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(l("closing","]"));D="\\"+D}Q({type:"bracket",value:D});continue}if("]"===D){if(!0===r.nobracket||B&&"bracket"===B.type&&1===B.value.length){Q({type:"text",value:D,output:"\\"+D});continue}if(0===I.brackets){if(!0===r.strictBrackets)throw new SyntaxError(l("opening","["));Q({type:"text",value:D,output:"\\"+D});continue}X("brackets");const e=B.value.slice(1);if(!0===B.posix||"^"!==e[0]||e.includes("/")||(D="/"+D),B.value+=D,W({value:D}),!1===r.literalBrackets||o.hasRegexChars(e))continue;const t=o.escapeRegex(B.value);if(I.output=I.output.slice(0,-B.value.length),!0===r.literalBrackets){I.output+=t,B.value=t;continue}B.value=`(${g}${t}|${B.value})`,I.output+=B.value;continue}if("{"===D&&!0!==r.nobrace){V("braces");const e={type:"brace",value:D,output:"(",outputIndex:I.output.length,tokensIndex:I.tokens.length};H.push(e),Q(e);continue}if("}"===D){const e=H[H.length-1];if(!0===r.nobrace||!e){Q({type:"text",value:D,output:D});continue}let t=")";if(!0===e.dots){const e=d.slice(),n=[];for(let t=e.length-1;t>=0&&(d.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=f(n,r),I.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=I.output.slice(0,e.outputIndex),n=I.tokens.slice(e.tokensIndex);e.value=e.output="\\{",D=t="\\}",I.output=r;for(const e of n)I.output+=e.output||e.value}Q({type:"brace",value:D,output:t}),X("braces"),H.pop();continue}if("|"===D){M.length>0&&M[M.length-1].conditions++,Q({type:"text",value:D});continue}if(","===D){let e=D;const t=H[H.length-1];t&&"braces"===U[U.length-1]&&(t.comma=!0,e="|"),Q({type:"comma",value:D,output:e});continue}if("/"===D){if("dot"===B.type&&I.index===I.start+1){I.start=I.index+1,I.consumed="",I.output="",d.pop(),B=y;continue}Q({type:"slash",value:D,output:x});continue}if("."===D){if(I.braces>0&&"dot"===B.type){"."===B.value&&(B.output=w);const e=H[H.length-1];B.type="dots",B.output+=D,B.value+=D,e.dots=!0;continue}if(I.braces+I.parens===0&&"bos"!==B.type&&"slash"!==B.type){Q({type:"text",value:D,output:w});continue}Q({type:"dot",value:D,output:w});continue}if("?"===D){if(!(B&&"("===B.value)&&!0!==r.noextglob&&"("===G()&&"?"!==G(2)){J("qmark",D);continue}if(B&&"paren"===B.type){const e=G();let t=D;if("<"===e&&!o.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===B.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(Y()))&&(t="\\"+D),Q({type:"text",value:D,output:t});continue}if(!0!==r.dot&&("slash"===B.type||"bos"===B.type)){Q({type:"qmark",value:D,output:O});continue}Q({type:"qmark",value:D,output:_});continue}if("!"===D){if(!0!==r.noextglob&&"("===G()&&("?"!==G(2)||!/[!=<:]/.test(G(3)))){J("negate",D);continue}if(!0!==r.nonegate&&0===I.index){z();continue}}if("+"===D){if(!0!==r.noextglob&&"("===G()&&"?"!==G(2)){J("plus",D);continue}if(B&&"("===B.value||!1===r.regex){Q({type:"plus",value:D,output:R});continue}if(B&&("bracket"===B.type||"paren"===B.type||"brace"===B.type)||I.parens>0){Q({type:"plus",value:D});continue}Q({type:"plus",value:R});continue}if("@"===D){if(!0!==r.noextglob&&"("===G()&&"?"!==G(2)){Q({type:"at",extglob:!0,value:D,output:""});continue}Q({type:"text",value:D});continue}if("*"!==D){"$"!==D&&"^"!==D||(D="\\"+D);const e=u.exec(Y());e&&(D+=e[0],I.index+=e[0].length),Q({type:"text",value:D});continue}if(B&&("globstar"===B.type||!0===B.star)){B.type="star",B.star=!0,B.value+=D,B.output=F,I.backtrack=!0,I.globstar=!0,K(D);continue}let t=Y();if(!0!==r.noextglob&&/^\([^?]/.test(t)){J("star",D);continue}if("star"===B.type){if(!0===r.noglobstar){K(D);continue}const n=B.prev,o=n.prev,i="slash"===n.type||"bos"===n.type,a=o&&("star"===o.type||"globstar"===o.type);if(!0===r.bash&&(!i||t[0]&&"/"!==t[0])){Q({type:"star",value:D,output:""});continue}const u=I.braces>0&&("comma"===n.type||"brace"===n.type),c=M.length&&("pipe"===n.type||"paren"===n.type);if(!i&&"paren"!==n.type&&!u&&!c){Q({type:"star",value:D,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[I.index+4];if(r&&"/"!==r)break;t=t.slice(3),K("/**",3)}if("bos"===n.type&&$()){B.type="globstar",B.value+=D,B.output=j(r),I.output=B.output,I.globstar=!0,K(D);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!a&&$()){I.output=I.output.slice(0,-(n.output+B.output).length),n.output="(?:"+n.output,B.type="globstar",B.output=j(r)+(r.strictSlashes?")":"|$)"),B.value+=D,I.globstar=!0,I.output+=n.output+B.output,K(D);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";I.output=I.output.slice(0,-(n.output+B.output).length),n.output="(?:"+n.output,B.type="globstar",B.output=`${j(r)}${x}|${x}${e})`,B.value+=D,I.output+=n.output+B.output,I.globstar=!0,K(D+q()),Q({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){B.type="globstar",B.value+=D,B.output=`(?:^|${x}|${j(r)}${x})`,I.output=B.output,I.globstar=!0,K(D+q()),Q({type:"slash",value:"/",output:""});continue}I.output=I.output.slice(0,-B.output.length),B.type="globstar",B.output=j(r),B.value+=D,I.output+=B.output,I.globstar=!0,K(D);continue}const n={type:"star",value:D,output:F};!0!==r.bash?!B||"bracket"!==B.type&&"paren"!==B.type||!0!==r.regex?(I.index!==I.start&&"slash"!==B.type&&"dot"!==B.type||("dot"===B.type?(I.output+=S,B.output+=S):!0===r.dot?(I.output+=P,B.output+=P):(I.output+=L,B.output+=L),"*"!==G()&&(I.output+=k,B.output+=k)),Q(n)):(n.output=D,Q(n)):(n.output=".*?","bos"!==B.type&&"slash"!==B.type||(n.output=L+n.output),Q(n))}for(;I.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing","]"));I.output=o.escapeLast(I.output,"["),X("brackets")}for(;I.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing",")"));I.output=o.escapeLast(I.output,"("),X("parens")}for(;I.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing","}"));I.output=o.escapeLast(I.output,"{"),X("braces")}if(!0===r.strictSlashes||"star"!==B.type&&"bracket"!==B.type||Q({type:"maybe_slash",value:"",output:x+"?"}),!0===I.backtrack){I.output="";for(const e of I.tokens)I.output+=null!=e.output?e.output:e.value,e.suffix&&(I.output+=e.suffix)}return I};p.fastpaths=(e,t)=>{const r={...t},a="number"==typeof r.maxLength?Math.min(i,r.maxLength):i,u=e.length;if(u>a)throw new SyntaxError(`Input length: ${u}, exceeds maximum allowed length: ${a}`);e=s[e]||e;const c=o.isWindows(t),{DOT_LITERAL:f,SLASH_LITERAL:l,ONE_CHAR:p,DOTS_SLASH:h,NO_DOT:y,NO_DOTS:d,NO_DOTS_SLASH:g,STAR:v,START_ANCHOR:m}=n.globChars(c),b=r.dot?d:y,w=r.dot?g:y,R=r.capture?"":"?:";let x=!0===r.bash?".*?":v;r.capture&&(x=`(${x})`);const k=e=>!0===e.noglobstar?x:`(${R}(?:(?!${m}${e.dot?h:f}).)*?)`,A=e=>{switch(e){case"*":return`${b}${p}${x}`;case".*":return`${f}${p}${x}`;case"*.*":return`${b}${x}${f}${p}${x}`;case"*/*":return`${b}${x}${l}${p}${w}${x}`;case"**":return b+k(r);case"**/*":return`(?:${b}${k(r)}${l})?${w}${p}${x}`;case"**/*.*":return`(?:${b}${k(r)}${l})?${w}${x}${f}${p}${x}`;case"**/.*":return`(?:${b}${k(r)}${l})?${f}${p}${x}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=A(t[1]);if(!r)return;return r+f+t[2]}}},E=o.removePrefix(e,{negated:!1,prefix:""});let S=A(E);return S&&!0!==r.strictSlashes&&(S+=l+"?"),S},e.exports=p},function(e,t,r){!function(r){"use strict";var n=function(e,t){var r=new Error(e+" at character "+t);throw r.index=t,r.description=e,r},o={"-":!0,"!":!0,"~":!0,"+":!0},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},a=function(e){var t,r=0;for(var n in e)(t=n.length)>r&&e.hasOwnProperty(n)&&(r=t);return r},u=a(o),c=a(i),s={true:!0,false:!1,null:null},f=function(e){return i[e]||0},l=function(e,t,r){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:r}},p=function(e){return e>=48&&e<=57},h=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!i[String.fromCharCode(e)]},y=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!i[String.fromCharCode(e)]},d=function(e){for(var t,r,a=0,d=e.charAt,g=e.charCodeAt,v=function(t){return d.call(e,t)},m=function(t){return g.call(e,t)},b=e.length,w=function(){for(var e=m(a);32===e||9===e||10===e||13===e;)e=m(++a)},R=function(){var e,t,r=k();return w(),63!==m(a)?r:(a++,(e=R())||n("Expected expression",a),w(),58===m(a)?(a++,(t=R())||n("Expected expression",a),{type:"ConditionalExpression",test:r,consequent:e,alternate:t}):void n("Expected :",a))},x=function(){w();for(var t=e.substr(a,c),r=t.length;r>0;){if(i.hasOwnProperty(t)&&(!h(m(a))||a+t.length<e.length&&!y(m(a+t.length))))return a+=r,t;t=t.substr(0,--r)}return!1},k=function(){var e,t,r,o,i,u,c,s,p;if(u=A(),!(t=x()))return u;for(i={value:t,prec:f(t)},(c=A())||n("Expected expression after "+t,a),o=[u,i,c];(t=x())&&0!==(r=f(t));){for(i={value:t,prec:r},p=t;o.length>2&&r<=o[o.length-2].prec;)c=o.pop(),t=o.pop().value,u=o.pop(),e=l(t,u,c),o.push(e);(e=A())||n("Expected expression after "+p,a),o.push(i,e)}for(e=o[s=o.length-1];s>1;)e=l(o[s-1].value,o[s-2],e),s-=2;return e},A=function(){var t,r,n;if(w(),t=m(a),p(t)||46===t)return E();if(39===t||34===t)return S();if(91===t)return T();for(n=(r=e.substr(a,u)).length;n>0;){if(o.hasOwnProperty(r)&&(!h(m(a))||a+r.length<e.length&&!y(m(a+r.length))))return a+=n,{type:"UnaryExpression",operator:r,argument:A(),prefix:!0};r=r.substr(0,--n)}return!(!h(t)&&40!==t)&&O()},E=function(){for(var e,t,r="";p(m(a));)r+=v(a++);if(46===m(a))for(r+=v(a++);p(m(a));)r+=v(a++);if("e"===(e=v(a))||"E"===e){for(r+=v(a++),"+"!==(e=v(a))&&"-"!==e||(r+=v(a++));p(m(a));)r+=v(a++);p(m(a-1))||n("Expected exponent ("+r+v(a)+")",a)}return t=m(a),h(t)?n("Variable names cannot start with a number ("+r+v(a)+")",a):46===t&&n("Unexpected period",a),{type:"Literal",value:parseFloat(r),raw:r}},S=function(){for(var e,t="",r=v(a++),o=!1;a<b;){if((e=v(a++))===r){o=!0;break}if("\\"===e)switch(e=v(a++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return o||n('Unclosed quote after "'+t+'"',a),{type:"Literal",value:t,raw:r+t+r}},P=function(){var t,r=m(a),o=a;for(h(r)?a++:n("Unexpected "+v(a),a);a<b&&(r=m(a),y(r));)a++;return t=e.slice(o,a),s.hasOwnProperty(t)?{type:"Literal",value:s[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},_=function(e){for(var t,r,o=[],i=!1,u=0;a<b;){if(w(),(t=m(a))===e){i=!0,a++,41===e&&u&&u>=o.length&&n("Unexpected token "+String.fromCharCode(e),a);break}if(44===t){if(a++,++u!==o.length)if(41===e)n("Unexpected token ,",a);else if(93===e)for(var c=o.length;c<u;c++)o.push(null)}else(r=R())&&"Compound"!==r.type||n("Expected comma",a),o.push(r)}return i||n("Expected "+String.fromCharCode(e),a),o},O=function(){var e,t;for(t=40===(e=m(a))?C():P(),w(),e=m(a);46===e||91===e||40===e;)a++,46===e?(w(),t={type:"MemberExpression",computed:!1,object:t,property:P()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:R()},w(),93!==(e=m(a))&&n("Unclosed [",a),a++):40===e&&(t={type:"CallExpression",arguments:_(41),callee:t}),w(),e=m(a);return t},C=function(){a++;var e=R();if(w(),41===m(a))return a++,e;n("Unclosed (",a)},T=function(){return a++,{type:"ArrayExpression",elements:_(93)}},j=[];a<b;)59===(t=m(a))||44===t?a++:(r=R())?j.push(r):a<b&&n('Unexpected "'+v(a)+'"',a);return 1===j.length?j[0]:{type:"Compound",body:j}};d.version="0.3.5",d.toString=function(){return"JavaScript Expression Parser (JSEP) v"+d.version},d.addUnaryOp=function(e){return u=Math.max(e.length,u),o[e]=!0,this},d.addBinaryOp=function(e,t){return c=Math.max(e.length,c),i[e]=t,this},d.addLiteral=function(e,t){return s[e]=t,this},d.removeUnaryOp=function(e){return delete o[e],e.length===u&&(u=a(o)),this},d.removeAllUnaryOps=function(){return o={},u=0,this},d.removeBinaryOp=function(e){return delete i[e],e.length===c&&(c=a(i)),this},d.removeAllBinaryOps=function(){return i={},c=0,this},d.removeLiteral=function(e){return delete s[e],this},d.removeAllLiterals=function(){return s={},this},e.exports?t=e.exports=d:t.parse=d}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.actObjData=new Map,this.objActData=new Map}return e.prototype.load=function(e){var t;for(var r in t="string"==typeof e?JSON.parse(e):e)this.actObjData.set(r,t[r]);var n={};for(var r in t)for(var o in t[r])o in n||(n[o]=[]),n[o].push(r);for(var o in n)this.objActData.set(o,n[o])},e.prototype.getPermissionJsonObject=function(){var e={};return this.actObjData.forEach((function(t,r){return e[r]=t})),e},e.prototype.getPermissionString=function(){return JSON.stringify(this.getPermissionJsonObject())},e.prototype.getTargetsFromAction=function(e){var t=this.actObjData.get(e);return void 0===t?new Array:t},e.prototype.getActionsObjects=function(){return this.actObjData},e.prototype.getObjectsActions=function(){return this.objActData},e.prototype.check=function(e,t){var r=this.actObjData.get(e);return null!=r&&r.includes(t)},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLocalStorage=t.loadFromLocalStorage=t.saveToLocalStorage=void 0;var n=function(){try{var e="fUjXn2r59";localStorage.setItem(e,"test");localStorage.getItem(e);return localStorage.removeItem(e),!0}catch(e){return!1}}();t.saveToLocalStorage=function(e,t,r){if(!n)return-1;var o={value:t,expired:Date.now()+1e3*r};try{localStorage.setItem("casbinjs_"+e,JSON.stringify(o))}catch(e){throw e}return 0},t.loadFromLocalStorage=function(e){if(!n)return null;var t=localStorage.getItem("casbinjs_"+e);if(null===t)return null;var r=JSON.parse(t);return Date.now()>r.expired?(localStorage.removeItem("casbinjs_"+e),null):r.value},t.removeLocalStorage=function(e){localStorage.removeItem("casbinjs_"+e)}}])}));